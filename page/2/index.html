<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta http-equiv="Cache-Control" content="max-age=86400" />
<meta name="baidu-site-verification" content="I3b2hxwJQe" />

<!-- <meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" /> -->






  <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="詹方的个人博客" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="詹方的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Fang -.-">
<meta property="og:url" content="http://www.demozhan.com/page/2/index.html">
<meta property="og:site_name" content="Fang -.-">
<meta property="og:description" content="詹方的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fang -.-">
<meta name="twitter:description" content="詹方的个人博客">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Fang -.- </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f060a37ef3c67e7d80e0730ccf4c5f23";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Fang -.-</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            <i class="menu-item-icon icon-next-commonweal"></i> <br />
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','http://7xltvd.com1.z0.glb.clouddn.com/swifty_st.js','_st');

  _st('install', '8paz1yFszaADHgDv8F_P','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/17/js-类数组对象转换为数组对象/" itemprop="url">
                js 类数组对象转换为数组对象
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-17T14:52:40+08:00" content="2016-02-17">
            2016-02-17
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/17/js-类数组对象转换为数组对象/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/17/js-类数组对象转换为数组对象/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="类数组对象-Array-like"><a href="#类数组对象-Array-like" class="headerlink" title="类数组对象(Array-like)"></a>类数组对象(Array-like)</h2><ol>
<li>具有指向对象元素的数字索引下标以及 length 属性,告诉我们对象的元素个数</li>
<li>不具有诸如 push 、forEach 以及 indexOf 等数组对象具有的方法</li>
</ol>
<h2 id="常见的类数组对象"><a href="#常见的类数组对象" class="headerlink" title="常见的类数组对象"></a>常见的类数组对象</h2><ul>
<li>document.getElementsByClassName()</li>
<li>document.getElementsByTagName()</li>
<li>document.getElementsByName()</li>
<li>document.stylesheets</li>
<li>parentNode.chidlNodes</li>
<li>arguments</li>
<li>document.querySelectorAll()</li>
<li>具有属性和长度的对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arrayObj = &#123;</div><div class="line">    <span class="number">0</span> : <span class="string">'Benjamin01'</span>,</div><div class="line">    <span class="number">1</span> : <span class="string">'Benjmain02'</span>,</div><div class="line">    <span class="attr">length</span> : <span class="number">2</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="转换为数组对象"><a href="#转换为数组对象" class="headerlink" title="转换为数组对象"></a>转换为数组对象</h2><p>slice()方法可以将一个类数组(Array-like)对象/集合转换成一个数组. 你只需要用数组原型上的slice方法call这个对象,即Array.prototype.slice.call(Array-like); 同时也可以简单的使用 [].slice.call(arguments)来代替。 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="external">MDN slice</a></p>
<h2 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h2><p>IE&lt;9中不能使用Array.prototype.slice，对于NodeList等并非一个JavaScript object,IE9 中Array.prototype.slice.call(NodeList) 已经不再抛异常了，可以使用其将NodeList等转换为数组</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> </div><div class="line">parent = <span class="built_in">document</span>.getElementById(<span class="string">"parent"</span>),</div><div class="line"><span class="comment">//此处childNodes在不同浏览器中的返回值不同</span></div><div class="line"><span class="comment">//Chrome、FF、IE9+ 长度为7(4个text + 3个div)</span></div><div class="line"><span class="comment">//IE6-IE8 长度为3(3个div)</span></div><div class="line">nodes  = parent.childNodes,</div><div class="line">slice  = <span class="built_in">Array</span>.prototype.slice,</div><div class="line">convertToArray = <span class="function"><span class="keyword">function</span>(<span class="params">nodes</span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> arr = [];</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		arr = slice.call(nodes);</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"AAA"</span>);</div><div class="line">	&#125;<span class="keyword">catch</span>(ex)&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,ilen = nodes.length; i &lt; ilen; i++)&#123;</div><div class="line">			arr.push(nodes[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> arr;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(convertToArray(nodes));</div></pre></td></tr></table></figure>
<h2 id="my-demo"><a href="#my-demo" class="headerlink" title="my demo"></a>my demo</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeArray</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">	<span class="keyword">return</span> [].slice.call(obj);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> div_list = <span class="built_in">document</span>.querySelectorAll(<span class="string">'p'</span>); <span class="comment">// 返回 NodeList</span></div><div class="line"><span class="keyword">var</span> div_array = <span class="built_in">Array</span>.prototype.slice.call(div_list); <span class="comment">// 将 NodeList 转换为数组</span></div><div class="line"></div><div class="line">div_array.push(<span class="number">123</span>);</div><div class="line"><span class="built_in">console</span>.log(div_array);</div></pre></td></tr></table></figure>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://www.zuojj.com/archives/218.html" target="_blank" rel="external">Benjamin-专注前端开发和用户体验</a></li>
<li><a href="http://www.cnblogs.com/rubylouvre/archive/2009/11/30/1614087.html" target="_blank" rel="external">司徒正美</a></li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/16/AMD-CMD-CommonJS及UMD规范/" itemprop="url">
                AMD,CMD,CommonJS及UMD规范
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-16T17:43:18+08:00" content="2016-02-16">
            2016-02-16
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/16/AMD-CMD-CommonJS及UMD规范/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/16/AMD-CMD-CommonJS及UMD规范/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><ul>
<li>转载自 <a href="http://gejiawen.github.io/2015/11/03/what-is-amd-cmd-commonjs-umd/" target="_blank" rel="external">http://gejiawen.github.io/2015/11/03/what-is-amd-cmd-commonjs-umd/</a></li>
<li>具体实现源码 <a href="https://github.com/zhanfang/amd_umd" target="_blank" rel="external">github</a></li>
</ul>
<h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h2><p>AMD规范，全称”Asynchronous Module Definition”，称为异步模块加载规范。一般应用在浏览器端。流行的浏览器端异步加载库RequireJS（中文网站）实现的就是AMD规范。</p>
<p>下面是使用AMD规范定义一个名为foo模块的方式，此模块依赖jquery，</p>
<pre><code>//    filename: foo.js
define([&apos;jquery&apos;], function ($) {
    //    methods
    function myFunc(){};

    //    exposed public methods
    return myFunc;
});
</code></pre><p>AMD讲究的是前置执行。稍微复杂的例子如下，foo模块有多个依赖及方法暴漏，</p>
<pre><code>//    filename: foo.js
define([&apos;jquery&apos;, &apos;underscore&apos;], function ($, _) {
    //    methods
    function a(){};    //    private because it&apos;s not returned (see below)
    function b(){};    //    public because it&apos;s returned
    function c(){};    //    public because it&apos;s returned

    //    exposed public methods
    return {
        b: b,
        c: c
    }
});
</code></pre><p>define是AMD规范用来声明模块的接口，示例中的第一个参数是一个数组，表示当前模块的依赖。第二个参数是一个回调函数，表示此模块的执行体。只有当依赖数组中的所有依赖模块都是可用的时，AMD模块加载器（比如RequireJS）才会去执行回调函数并返回此模块的暴露接口。</p>
<p>注意，回调函数中参数的顺序与依赖数组中的依赖顺序一致。（即：jquery-&gt;$，underscore-&gt;_）</p>
<p>当然，在这里我可以将回调函数的参数名称改成任何我们想用的可用变量名，这并不会对模块的声明造成任何影响。</p>
<p>除此之外，你不能在模块声明的外部使用$或者_，因为他们只在模块的回调函数体中才有定义。</p>
<p><strong>我之前有转载阮一峰老师的模块化文章，有关于requirejs的具体<a href="http://zhanfang.github.io/2015/09/05/js%E6%A8%A1%E5%9D%97%E5%8C%963/" target="_blank" rel="external">教程</a></strong></p>
<h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h2><p>CMD规范，全称”Common Module Definition”，称为通用模块加载规范。一般也是用在浏览器端。浏览器端异步加载库Sea.js实现的就是CMD规范。</p>
<p>下面是使用AMD规范定义一个名为foo模块的方式，此模块依赖jquery，</p>
<pre><code>define(function (require, exports, module) {
    // load dependence
    var $ = require(&apos;jquery&apos;);

    //    methods
    function myFunc(){};

    //    exposed public methods
    return myFunc;
})
</code></pre><p><strong>CMD规范倾向依赖就近</strong> ，稍微复杂一点例子</p>
<pre><code>define(function (requie, exports, module) {
    // 依赖可以就近书写
    var a = require(&apos;./a&apos;);
    a.test();

    // ...
    // 软依赖
    if (status) {
        var b = requie(&apos;./b&apos;);
        b.test();
    }
});
</code></pre><p>关于AMD和CMD的区别，可参考这篇文章，<a href="http://gejiawen.github.io/2014/07/18/small-talk-about-fe-spec/" target="_blank" rel="external">AMD/CMD与前端规范</a>。</p>
<h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><p>根据CommonJS规范，一个单独的文件就是一个模块。每一个模块都是一个单独的作用域，也就是说，在一个文件定义的变量（还包括函数和类），都是私有的，对其他文件是不可见的。</p>
<p>如果你在Node.js平台上写过东西，你应该会比较熟悉CommonJS规范。与前面的AMD及CMD规范不一样的是，CommonJS规范一般应用于服务端（Node.js平台），而且CommonJS加载模块采用的是同步方式（这跟他适用的场景有关系）。同时，得力于Browserify这样的第三方工具，我们可以在浏览器端使用采用CommonJS规范的js文件。</p>
<p>下面是使用CommonJS规范声明一个名为foo模块的方式，同时依赖jquery模块，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//    filename: foo.js</span></div><div class="line"><span class="comment">//    dependencies</span></div><div class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</div><div class="line"></div><div class="line"><span class="comment">//    methods</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">//    exposed public method (single)</span></div><div class="line"><span class="built_in">module</span>.exports = myFunc;</div></pre></td></tr></table></figure>
<p>稍微复杂一点的示例如下，拥有多个依赖以及抛出多个接口，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//    filename: foo.js</span></div><div class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</div><div class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'underscore'</span>);</div><div class="line"></div><div class="line"><span class="comment">//    methods</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    private because it's omitted from module.exports (see below)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    public because it's defined in module.exports</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    public because it's defined in module.exports</span></div><div class="line"></div><div class="line"><span class="comment">//    exposed public methods</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">b</span>: b,</div><div class="line">    <span class="attr">c</span>: c</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h2><p>因为AMD，CommonJS规范是两种不一致的规范，虽然他们应用的场景也不太一致，但是人们仍然是期望有一种统一的规范来支持这两种规范。于是，UMD（Universal Module Definition，称之为通用模块规范）规范诞生了。</p>
<p>客观来说，这个UMD规范看起来的确没有AMD和CommonJS规范简约。但是它支持AMD和CommonJS规范，同时还支持古老的全局模块模式。</p>
<p>我们来看个示例，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd) &#123;</div><div class="line">        <span class="comment">// AMD</span></div><div class="line">        define([<span class="string">'jquery'</span>], factory);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> exports === <span class="string">'object'</span>) &#123;</div><div class="line">        <span class="comment">// Node, CommonJS-like</span></div><div class="line">        <span class="built_in">module</span>.exports = factory(<span class="built_in">require</span>(<span class="string">'jquery'</span>));</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// Browser globals (root is window)</span></div><div class="line">        root.returnExports = factory(root.jQuery);</div><div class="line">    &#125;</div><div class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</div><div class="line">    <span class="comment">//    methods</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">myFunc</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//    exposed public method</span></div><div class="line">    <span class="keyword">return</span> myFunc;</div><div class="line">&#125;));</div></pre></td></tr></table></figure>
<blockquote>
<p>个人觉得UMD规范更像一个语法糖。<strong>应用UMD规范的js文件其实就是一个立即执行函数。</strong> 函数有两个参数，第一个参数是当前运行时环境，第二个参数是模块的定义体。在执行UMD规范时，会优先判断是当前环境是否支持AMD环境，然后再检验是否支持CommonJS环境，否则认为当前环境为浏览器环境（window）。当然具体的判断顺序其实是可以调换的。</p>
</blockquote>
<p>下面是一个更加复杂的示例，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd) &#123;</div><div class="line">        <span class="comment">// AMD</span></div><div class="line">        define([<span class="string">'jquery'</span>, <span class="string">'underscore'</span>], factory);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> exports === <span class="string">'object'</span>) &#123;</div><div class="line">        <span class="comment">// Node, CommonJS-like</span></div><div class="line">        <span class="built_in">module</span>.exports = factory(<span class="built_in">require</span>(<span class="string">'jquery'</span>), <span class="built_in">require</span>(<span class="string">'underscore'</span>));</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// Browser globals (root is window)</span></div><div class="line">        root.returnExports = factory(root.jQuery, root._);</div><div class="line">    &#125;</div><div class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$, _</span>) </span>&#123;</div><div class="line">    <span class="comment">//    methods</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    private because it's not returned (see below)</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    public because it's returned</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;;    <span class="comment">//    public because it's returned</span></div><div class="line"></div><div class="line">    <span class="comment">//    exposed public methods</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">b</span>: b,</div><div class="line">        <span class="attr">c</span>: c</div><div class="line">    &#125;</div><div class="line">&#125;));</div></pre></td></tr></table></figure>
<p>Tips: 如果你写了一个小工具库，你想让它及支持AMD规范，又想让他支持CommonJS规范，那么采用UMD规范对你的代码进行包装吧，就像<a href="https://github.com/gejiawen/bullhead/blob/master/index.js" target="_blank" rel="external">这样</a>。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/15/hexo-bug/" itemprop="url">
                hexo-theme-next bug
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-15T23:24:11+08:00" content="2016-02-15">
            2016-02-15
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/15/hexo-bug/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/15/hexo-bug/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近用手机浏览我的博客的时候发现主页宽度总是有问题，文章却没有问题，今天用chrome看了一下，发现应该是hexo-theme-next这个主题的bug，bug主要有两个</p>
</blockquote>
<h2 id="bug"><a href="#bug" class="headerlink" title="`` bug"></a>`` bug</h2><h2 id="table-bug"><a href="#table-bug" class="headerlink" title="table bug"></a>table bug</h2><p>在hexo-next-theme中 table的样式为</p>
<pre><code>table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    border: 1px solid #ddd;
    font-size: 14px;
}
</code></pre><p>由于table元素把整个页面撑开，造成手机端宽度变大，看起来就像被缩放了</p>
<h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>改table的父元素为改为可滚动元素，如下：</p>
<pre><code>.posts-expand .post-body {
    text-align: justify;
    overflow: scroll;
}
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/13/迭代器和生成器-function-yield/" itemprop="url">
                迭代器和生成器(function* & yield)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-13T22:14:18+08:00" content="2016-02-13">
            2016-02-13
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/13/迭代器和生成器-function-yield/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/13/迭代器和生成器-function-yield/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>参考:</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Iterators_and_Generators" target="_blank" rel="external">mdn迭代器和生成器</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="external">mdn function*</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/yield" target="_blank" rel="external">mdn yield</a></li>
</ul>
<p>处理一个集合中每一项是很常见的操作。JavaScript 提供了好几种方法来遍历一个集合，从简单的 for 和 for each 循环至 map()，filter() 和 array comprehensions。 迭代器和生成器，在 JavaScript 1.7 中, 迭代器的概念属于核心语言中的重点，并提供了一种机制来定义 for…of 循环。</p>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>迭代器是一个对象，知道如何存取物品从一个集合一次取出一项， 而跟踪它的当前序列所在的位置。在  JavaScript 中 迭代器是一个对象，它提供了一个 next() 方法返回序列中的下一个项目。当这个序列消亡时这个方法可以随时抛出一个StopIteration exception（异常）。</p>
<p>一旦创建，迭代器对象可以显式地通过不断调用 next()，或隐式地使用 JavaScript 的 for…in  和 for each 构造。</p>
<p>简单的迭代器对象和数组可以使用 Iterator() 函数创建（下面是一个简单的对像）。</p>
<h2 id="生成器（Generators）-一个更好的方法来构建遍历器EDIT"><a href="#生成器（Generators）-一个更好的方法来构建遍历器EDIT" class="headerlink" title="生成器（Generators）: 一个更好的方法来构建遍历器EDIT"></a>生成器（Generators）: 一个更好的方法来构建遍历器EDIT</h2><p>虽然迭代器是一个有用的工具，但是由于需要显示地维持他们的内部状态，所以他们的构造需要仔细的规划（看得我眼花呀）。生成器给你提供了一个强大的选择：它允许你通过写一个可以保存自己状态的的简单函数来定义一个迭代算法。</p>
<p>一个生成器其实是一种特殊类型的函数（这个函数作为一个为迭代器工作的工厂），一个函数如果它里面包含了一个或一个以上的yield表达式，那么这个函数就成为一个生成器了。</p>
<blockquote>
<p><strong>当一个生成器函数被一个函数体调用时并不会马上执行；相反，它会返回一个generator-iterator对象。每次调用generator-iterator的next()方法将会执行这个函数体至下一个yield表达式并且返回一个结果。当函数执行完或者执行到一个return时抛出一个StopIteration exception异常。</strong></p>
</blockquote>
<p>yield*后面跟的是一个可遍历的结构，它会调用该结构的遍历器接口。</p>
<pre><code>let generator = function* () {
  yield 1;
  yield* [2,3,4];
  yield 5;
};

var iterator = generator();

iterator.next() // { value: 1, done: false }
iterator.next() // { value: 2, done: false }
iterator.next() // { value: 3, done: false }
iterator.next() // { value: 4, done: false }
iterator.next() // { value: 5, done: false }
iterator.next() // { value: undefined, done: true }
</code></pre><h3 id="高级生成器"><a href="#高级生成器" class="headerlink" title="高级生成器"></a>高级生成器</h3><p>生成器按照要求产生values，这样可以高效的表示序列，这点对于计算机来说很重要，上面的无穷序列就是一个很好的证明。</p>
<p>除了next()方法，generator-iterator对象也有一个send()方法可以用来修改生成器的内部状态。传递一个值给send()将被视为最后一个yield表达式的结果（生成器暂停）。你必须在你使用send(参数)前通过调用next()来启动生成器。</p>
<p>这里是斐波那契生成器使用send()来重新启动序列：</p>
<pre><code>function fibonacci(){
  var fn1 = 1;
  var fn2 = 1;
  while (1){
    var current = fn2;
    fn2 = fn1;
    fn1 = fn1 + current;
    var reset = yield current;
    if (reset){
        fn1 = 1;
        fn2 = 1;
    }
  }
}

var sequence = fibonacci();
print(sequence.next());     // 1
print(sequence.next());     // 1
print(sequence.next());     // 2
print(sequence.next());     // 3
print(sequence.next());     // 5
print(sequence.next());     // 8
print(sequence.next());     // 13
print(sequence.send(true)); // 1
print(sequence.next());     // 1
print(sequence.next());     // 2
print(sequence.next());     // 3
</code></pre><p>生成器拥有一个 close() 方法来强制生成器结束。结束一个生成器会产生如下影响：</p>
<ul>
<li>所有生成器中有效的 finally 字句将会执行</li>
<li>如果 finally 字句抛出了除 StopIteration 以外的任何异常，该异常将会被传递到 close() 方法的调用者</li>
<li>生成器会终止</li>
</ul>
<h2 id="function"><a href="#function" class="headerlink" title="function*"></a>function*</h2><p>function* 声明（function关键字后跟一个星号）定义一个generator（生成器）函数，返回一个Generator对象。</p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>生成器是一种可以从中退出并在之后重新进入的函数。生成器的环境（绑定的变量）会在每次执行后被保存，下次进入时可继续使用。</p>
<p>调用一个生成器函数并不马上执行它的主体，而是返回一个这个生成器函数的迭代器（iterator）对象。当这个迭代器的next()方法被调用时，生成器函数的主体会被执行直至第一个yield表达式，该表达式定义了迭代器返回的值，或者，被 yield*委派至另一个生成器函数。next()方法返回一个对象，该对象有一个value属性，表示产出的值，和一个done属性，表示生成器是否已经产出了它最后的值。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>简单示例</p>
<pre><code>function* idMaker(){
  var index = 0;
  while(index&lt;3)
    yield index++;
}

var gen = idMaker();

console.log(gen.next().value); // 0
console.log(gen.next().value); // 1
console.log(gen.next().value); // 2
console.log(gen.next().value); // undefined
// ...
</code></pre><p>yield*的示例</p>
<pre><code>function* anotherGenerator(i) {
  yield i + 1;
  yield i + 2;
  yield i + 3;
}

function* generator(i){
  yield i;
  yield* anotherGenerator(i);
  yield i + 10;
}

var gen = generator(10);

console.log(gen.next().value); // 10
console.log(gen.next().value); // 11
console.log(gen.next().value); // 12
console.log(gen.next().value); // 13
console.log(gen.next().value); // 20
</code></pre><h2 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h2><p>yield 关键字用来暂停和继续一个生成器函数 (function* or legacy generator).</p>
<pre><code>yield [[expression]];
</code></pre><p>expression<br>用作返回值.  如果忽略, 将返回 undefined .</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/13/ES6新特性/" itemprop="url">
                ES6新特性（一）
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-13T15:40:14+08:00" content="2016-02-13">
            2016-02-13
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/es6/" itemprop="url" rel="index">
                  <span itemprop="name">es6</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/es6/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/13/ES6新特性/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/13/ES6新特性/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近在阅读阮一峰老师的 <a href="http://es6.ruanyifeng.com/" title="ECMAScript 6 入门" target="_blank" rel="external">ECMAScript 6 入门</a> 下面进行简单的总结，大部分内容是摘抄自上面链接，具体内容还需要深入阅读理解</p>
</blockquote>
<h2 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h2><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><blockquote>
<p>ES6新增了let命令，用来声明变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效</p>
</blockquote>
<pre><code>for(let i = 0; i &lt; arr.length; i++){}
console.log(i)
//ReferenceError: i is not defined
</code></pre><p>下面的代码如果使用var，最后输出的是10。</p>
<pre><code>var a = [];
for (var i = 0; i &lt; 10; i++) {
    a[i] = function () {
       console.log(i);
    };
}
a[6](); // 10
</code></pre><p>上面代码中，变量i是var声明的，在全局范围内都有效。所以每一次循环，新的i值都会覆盖旧值，导致最后输出的是最后一轮的i的值。</p>
<p>利用闭包解决该问题</p>
<pre><code>var a = [];
for (var i = 0; i &lt; 10; i++) {
  a[i] = function(num){ 
    return function () {
     console.log(num);
    }
  }(i);
}
a[6](); // 6
</code></pre><p>使用let解决该问题</p>
<pre><code>var a = [];
for (let i = 0; i &lt; 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6](); // 6
</code></pre><p>上面代码中，变量i是let声明的，当前的i只在本轮循环有效，所以每一次循环的i其实都是一个新的变量，所以最后输出的是6。</p>
<h4 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h4><ul>
<li>不存在变量提升: let不像var那样会发生“变量提升”现象。所以，变量一定要在声明后使用，否则报错。</li>
<li>暂时性死区: 只要块级作用域内存在let命令，它所声明的变量就“绑定”（binding）这个区域，不再受外部的影响。</li>
<li>let不允许在相同作用域内，重复声明同一个变量。</li>
<li>let实际上为JavaScript新增了块级作用域。</li>
</ul>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><blockquote>
<p>const也用来声明变量，但是声明的是常量。一旦声明，常量的值就不能改变。</p>
</blockquote>
<p><strong>const命令声明的常量也是不提升，同样存在暂时性死区，只能在声明的位置后面使用。</strong></p>
<h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><blockquote>
<p>解构的含义简单点就是自动解析数组或者对象中值，解析出来之后一次赋值给一系列的变量。</p>
</blockquote>
<p>利用这个特性，我们可以让一个函数返回一个数组，然后利用解构赋值得到数组中的每一个元素.</p>
<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><pre><code>var [a, b, c] = [1, 2, 3];
</code></pre><h3 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h3><p>对象的解构与数组有一个重要的不同。数组的元素是按次序排列的，变量的取值由它的位置决定；而对象的属性没有次序，变量必须与属性同名，才能取到正确的值。</p>
<pre><code>var { bar, foo } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
foo // &quot;aaa&quot;
bar // &quot;bbb&quot;

var { baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
baz // undefined
</code></pre><h3 id="字符串的解构"><a href="#字符串的解构" class="headerlink" title="字符串的解构"></a>字符串的解构</h3><p>字符串也可以解构赋值。这是因为此时，字符串被转换成了一个类似数组的对象。</p>
<pre><code>const [a, b, c, d, e] = &apos;hello&apos;;
a // &quot;h&quot;
b // &quot;e&quot;
c // &quot;l&quot;
d // &quot;l&quot;
e // &quot;o&quot;
</code></pre><p>类似数组的对象都有一个length属性，因此还可以对这个属性解构赋值。</p>
<pre><code>let {length : len} = &apos;hello&apos;;
len // 5
</code></pre><h3 id="数值和布尔值的解构赋值"><a href="#数值和布尔值的解构赋值" class="headerlink" title="数值和布尔值的解构赋值"></a>数值和布尔值的解构赋值</h3><pre><code>let {toString: s} = 123;
s === Number.prototype.toString // true

let {toString: s} = true;
s === Boolean.prototype.toString // true
</code></pre><p>上面代码中，数值和布尔值的包装对象都有toString属性，因此变量s都能取到值。</p>
<p>解构赋值的规则是，只要等号右边的值不是对象，就先将其转为对象。由于undefined和null无法转为对象，所以对它们进行解构赋值，都会报错。</p>
<pre><code>let { prop: x } = undefined; // TypeError
let { prop: y } = null; // TypeError
</code></pre><h3 id="函数参数的解构赋值"><a href="#函数参数的解构赋值" class="headerlink" title="函数参数的解构赋值"></a>函数参数的解构赋值</h3><p>函数参数的解构也可以使用默认值。</p>
<pre><code>function move({x = 0, y = 0} = {}) {
  return [x, y];
}

move({x: 3, y: 8}); // [3, 8]
move({x: 3}); // [3, 0]
move({}); // [0, 0]
move(); // [0, 0]
</code></pre><h2 id="箭头操作符"><a href="#箭头操作符" class="headerlink" title="箭头操作符"></a>箭头操作符</h2><blockquote>
<p>其实箭头操作符其实就是使用=&gt;语法来代替函数。</p>
</blockquote>
<pre><code>var arr = [1, 2, 3];

// 传统写法
arr.forEach(function (v) {
    console.log(v);
});

// 使用箭头操作符
arr.forEach( v =&gt; console.log(v));
</code></pre><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><blockquote>
<p><strong>ES6引入了一种新的原始数据类型Symbol，表示独一无二的值。它是JavaScript语言的第七种数据类型，前六种是：Undefined、Null、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。</strong></p>
</blockquote>
<p>Symbol值通过Symbol函数生成。这就是说，对象的属性名现在可以有两种类型，一种是原来就有的字符串，另一种就是新增的Symbol类型。凡是属性名属于Symbol类型，就都是独一无二的，可以保证不会与其他属性名产生冲突。</p>
<pre><code>var mySymbol = Symbol();

// 第一种写法
var a = {};
a[mySymbol] = &apos;Hello!&apos;;

// 第二种写法
var a = {
  [mySymbol]: &apos;Hello!&apos;
};

// 第三种写法
var a = {};
Object.defineProperty(a, mySymbol, { value: &apos;Hello!&apos; });

// 以上写法都得到同样结果
a[mySymbol] // &quot;Hello!&quot;
</code></pre><h2 id="Proxy和Reflect"><a href="#Proxy和Reflect" class="headerlink" title="Proxy和Reflect"></a>Proxy和Reflect</h2><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><blockquote>
<p>Proxy可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。Proxy这个词的原意是代理，用在这里表示由它来“代理”某些操作，可以译为“代理器”。</p>
</blockquote>
<pre><code>var obj = new Proxy({}, {
  get: function (target, key, receiver) {
    console.log(`getting ${key}!`);
    return Reflect.get(target, key, receiver);
  },
  set: function (target, key, value, receiver) {
    console.log(`setting ${key}!`);
    return Reflect.set(target, key, value, receiver);
  }
});
</code></pre><p>上面代码对一个空对象架设了一层拦截，重定义了属性的读取（get）和设置（set）行为。这里暂时先不解释具体的语法，只看运行结果。对设置了拦截行为的对象obj，去读写它的属性，就会得到下面的结果。</p>
<pre><code>obj.count = 1
//  setting count!
++obj.count
//  getting count!
//  setting count!
//  2
</code></pre><h3 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h3><p>Reflect对象的设计目的有这样几个。</p>
<ol>
<li><p>将Object对象的一些明显属于语言内部的方法（比如Object.defineProperty），放到Reflect对象上。现阶段，某些方法同时在Object和Reflect对象上部署，未来的新方法将只部署在Reflect对象上。</p>
</li>
<li><p>修改某些Object方法的返回结果，让其变得更合理。比如，Object.defineProperty(obj, name, desc)在无法定义属性时，会抛出一个错误，而Reflect.defineProperty(obj, name, desc)则会返回false。</p>
<pre><code>// 老写法
try {
  Object.defineProperty(target, property, attributes);
  // success
} catch (e) {
  // failure
}

// 新写法
if (Reflect.defineProperty(target, property, attributes)) {
  // success
} else {
  // failure
}
</code></pre></li>
<li><p>让Object操作都变成函数行为。某些Object操作是命令式，比如name in obj和delete obj[name]，而Reflect.has(obj, name)和Reflect.deleteProperty(obj, name)让它们变成了函数行为。</p>
<pre><code>// 老写法
&apos;assign&apos; in Object // true

// 新写法
Reflect.has(Object, &apos;assign&apos;) // true
</code></pre></li>
<li><p>Reflect对象的方法与Proxy对象的方法一一对应，只要是Proxy对象的方法，就能在Reflect对象上找到对应的方法。这就让Proxy对象可以方便地调用对应的Reflect方法，完成默认行为，作为修改行为的基础。也就是说，不管Proxy怎么修改默认行为，你总可以在Reflect上获取默认行为。</p>
<pre><code>var loggedObj = new Proxy(obj, {
  get(target, name) {
    console.log(&apos;get&apos;, target, name);
    return Reflect.get(target, name);
  },
  deleteProperty(target, name) {
    console.log(&apos;delete&apos; + name);
    return Reflect.deleteProperty(target, name);
  },
  has(target, name) {
    console.log(&apos;has&apos; + name);
    return Reflect.has(target, name);
  }
});
</code></pre><p> 上面代码中，每一个Proxy对象的拦截操作（get、delete、has），内部都调用对应的Reflect方法，保证原生行为能够正常执行。添加的工作，就是将每一个操作输出一行日志。</p>
<p> 有了Reflect对象以后，很多操作会更易读。</p>
<pre><code>// 老写法
Function.prototype.apply.call(Math.floor, undefined, [1.75]) // 1

// 新写法
Reflect.apply(Math.floor, undefined, [1.75]) // 1
</code></pre></li>
</ol>
<h2 id="二进制数组"><a href="#二进制数组" class="headerlink" title="二进制数组"></a>二进制数组</h2><blockquote>
<p>这个接口的原始设计目的，与WebGL项目有关。所谓WebGL，就是指浏览器与显卡之间的通信接口，为了满足JavaScript与显卡之间大量的、实时的数据交换，它们之间的数据通信必须是二进制的，而不能是传统的文本格式。文本格式传递一个32位整数，两端的JavaScript脚本与显卡都要进行格式转化，将非常耗时。这时要是存在一种机制，可以像C语言那样，直接操作字节，将4个字节的32位整数，以二进制形式原封不动地送入显卡，脚本的性能就会大幅提升。</p>
</blockquote>
<h2 id="Set和Map数据结构"><a href="#Set和Map数据结构" class="headerlink" title="Set和Map数据结构"></a>Set和Map数据结构</h2><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><blockquote>
<p>ES6提供了新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p>
</blockquote>
<p>Set本身是一个构造函数，用来生成Set数据结构。</p>
<pre><code>var s = new Set();

[2,3,5,4,5,2,2].map(x =&gt; s.add(x))

for (let i of s) {console.log(i)}
// 2 3 5 4
</code></pre><p>上面代码通过add方法向Set结构加入成员，结果表明Set结构不会添加重复的值。</p>
<p>Set函数可以接受一个数组（或类似数组的对象）作为参数，用来初始化。</p>
<pre><code>var set = new Set([1, 2, 3, 4, 4])
[...set]
// [1, 2, 3, 4]

var items = new Set([1, 2, 3, 4, 5, 5, 5, 5]);
items.size // 5

function divs () {
  return [...document.querySelectorAll(&apos;div&apos;)]
}

var set = new Set(divs())
set.size // 56

// 类似于
divs().forEach(div =&gt; set.add(div))
set.size // 56
</code></pre><h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><p>WeakSet结构与Set类似，也是不重复的值的集合。但是，它与Set有两个区别。</p>
<p>首先，WeakSet的成员只能是对象，而不能是其他类型的值。</p>
<p>其次，WeakSet中的对象都是弱引用，即垃圾回收机制不考虑WeakSet对该对象的引用，也就是说，如果其他对象都不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存，不考虑该对象还存在于WeakSet之中。这个特点意味着，无法引用WeakSet的成员，因此WeakSet是不可遍历的。</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>JavaScript的对象（Object），本质上是键值对的集合（Hash结构），但是只能用字符串当作键。这给它的使用带来了很大的限制。</p>
<pre><code>var data = {};
var element = document.getElementById(&quot;myDiv&quot;);

data[element] = metadata;
data[&quot;[Object HTMLDivElement]&quot;] // metadata
</code></pre><p>上面代码原意是将一个DOM节点作为对象data的键，但是由于对象只接受字符串作为键名，所以element被自动转为字符串[Object HTMLDivElement]。</p>
<p>为了解决这个问题，ES6提供了Map数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object结构提供了“字符串—值”的对应，Map结构提供了“值—值”的对应，是一种更完善的Hash结构实现。如果你需要“键值对”的数据结构，Map比Object更合适。</p>
<pre><code>var m = new Map();
var o = {p: &quot;Hello World&quot;};

m.set(o, &quot;content&quot;)
m.get(o) // &quot;content&quot;

m.has(o) // true
m.delete(o) // true
m.has(o) // false
</code></pre><h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><p>WeakMap结构与Map结构基本类似，唯一的区别是它只接受对象作为键名（null除外），不接受其他类型的值作为键名，而且键名所指向的对象，不计入垃圾回收机制。</p>
<h2 id="Iterator和for…of循环"><a href="#Iterator和for…of循环" class="headerlink" title="Iterator和for…of循环"></a>Iterator和for…of循环</h2><p>JavaScript原有的表示“集合”的数据结构，主要是数组（Array）和对象（Object），ES6又添加了Map和Set。这样就有了四种数据集合，用户还可以组合使用它们，定义自己的数据结构，比如数组的成员是Map，Map的成员是对象。这样就需要一种统一的接口机制，来处理所有不同的数据结构。</p>
<p>遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署Iterator接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。</p>
<p>Iterator的作用有三个：一是为各种数据结构，提供一个统一的、简便的访问接口；二是使得数据结构的成员能够按某种次序排列；三是ES6创造了一种新的遍历命令for…of循环，Iterator接口主要供for…of消费。</p>
<p>Iterator的遍历过程是这样的。</p>
<ol>
<li><p>创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</p>
</li>
<li><p>第一次调用指针对象的next方法，可以将指针指向数据结构的第一个成员。</p>
</li>
<li><p>第二次调用指针对象的next方法，指针就指向数据结构的第二个成员。</p>
</li>
<li><p>不断调用指针对象的next方法，直到它指向数据结构的结束位置。</p>
</li>
</ol>
<h3 id="for…of"><a href="#for…of" class="headerlink" title="for…of"></a>for…of</h3><p>ES6借鉴C++、Java、C#和Python语言，引入了for…of循环，作为遍历所有数据结构的统一的方法。一个数据结构只要部署了Symbol.iterator属性，就被视为具有iterator接口，就可以用for…of循环遍历它的成员。也就是说，for…of循环内部调用的是数据结构的Symbol.iterator方法。</p>
<p>for…of循环可以使用的范围包括数组、Set和Map结构、某些类似数组的对象（比如arguments对象、DOM NodeList对象）、后文的Generator对象，以及字符串。</p>
<p>JavaScript原有的for…in循环，只能获得对象的键名，不能直接获取键值。ES6提供for…of循环，允许遍历获得键值。</p>
<pre><code>var arr = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;];

for (let a in arr) {
  console.log(a); // 0 1 2 3
}

for (let a of arr) {
  console.log(a); // a b c d
}
</code></pre><h2 id="Generator-函数"><a href="#Generator-函数" class="headerlink" title="Generator 函数"></a>Generator 函数</h2><p>Generator函数有多种理解角度。从语法上，首先可以把它理解成，<strong>Generator函数是一个状态机，封装了多个内部状态。</strong></p>
<p>执行Generator函数会返回一个遍历器对象，也就是说，<strong>Generator函数除了状态机，还是一个遍历器对象生成函数。</strong>返回的遍历器对象，可以依次遍历Generator函数内部的每一个状态。</p>
<p>形式上，Generator函数是一个普通函数，但是有两个特征。<strong>一是，function命令与函数名之间有一个星号；二是，函数体内部使用yield语句，定义不同的内部状态</strong>（yield语句在英语里的意思就是“产出”）。</p>
<h3 id="yield语句"><a href="#yield语句" class="headerlink" title="yield语句"></a>yield语句</h3><p>由于Generator函数返回的遍历器对象，只有调用next方法才会遍历下一个内部状态，所以其实提供了一种可以暂停执行的函数。yield语句就是暂停标志。</p>
<p>遍历器对象的next方法的运行逻辑如下。</p>
<ol>
<li><p>遇到yield语句，就暂停执行后面的操作，并将紧跟在yield后面的那个表达式的值，作为返回的对象的value属性值。</p>
</li>
<li><p>下一次调用next方法时，再继续往下执行，直到遇到下一个yield语句。</p>
</li>
<li><p>如果没有再遇到新的yield语句，就一直运行到函数结束，直到return语句为止，并将return语句后面的表达式的值，作为返回的对象的value属性值。</p>
</li>
<li><p>如果该函数没有return语句，则返回的对象的value属性值为undefined。</p>
</li>
</ol>
<p>需要注意的是，yield语句后面的表达式，只有当调用next方法、内部指针指向该语句时才会执行，因此等于为JavaScript提供了手动的“惰性求值”（Lazy Evaluation）的语法功能</p>
<pre><code>function* gen() {
  yield  123 + 456;
}
</code></pre><p>上面代码中，yield后面的表达式123 + 456，不会立即求值，只会在next方法将指针移到这一句时，才会求值。</p>
<p>Generator函数可以不用yield语句，这时就变成了一个单纯的暂缓执行函数。</p>
<pre><code>function* f() {
  console.log(&apos;执行了！&apos;)
}

var generator = f();

setTimeout(function () {
  generator.next()
}, 2000);
</code></pre><h3 id="for…of循环"><a href="#for…of循环" class="headerlink" title="for…of循环"></a>for…of循环</h3><p>for…of循环可以自动遍历Generator函数，且此时不再需要调用next方法。</p>
<pre><code>function *foo() {
  yield 1;
  yield 2;
  yield 3;
  yield 4;
  yield 5;
  return 6;
}

for (let v of foo()) {
  console.log(v);
}
// 1 2 3 4 5
</code></pre><h2 id="Promise对象"><a href="#Promise对象" class="headerlink" title="Promise对象"></a>Promise对象</h2><blockquote>
<p>所谓Promise，简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。从语法上说，Promise是一个对象，从它可以获取异步操作的消息。Promise提供统一的API，各种异步操作都可以用同样的方法进行处理。</p>
</blockquote>
<p>Promise对象有以下两个特点。</p>
<ol>
<li><p>对象的状态不受外界影响。Promise对象代表一个异步操作，有三种状态：Pending（进行中）、Resolved（已完成，又称Fulfilled）和Rejected（已失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是Promise这个名字的由来，它的英语意思就是“承诺”，表示其他手段无法改变。</p>
</li>
<li><p>一旦状态改变，就不会再变，任何时候都可以得到这个结果。Promise对象的状态改变，只有两种可能：从Pending变为Resolved和从Pending变为Rejected。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果。就算改变已经发生了，你再对Promise对象添加回调函数，也会立即得到这个结果。这与事件（Event）完全不同，事件的特点是，如果你错过了它，再去监听，是得不到结果的。</p>
</li>
</ol>
<p>有了Promise对象，就可以将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数。此外，Promise对象提供统一的接口，使得控制异步操作更加容易。</p>
<p>Promise也有一些缺点。首先，无法取消Promise，一旦新建它就会立即执行，无法中途取消。其次，如果不设置回调函数，Promise内部抛出的错误，不会反应到外部。第三，当处于Pending状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。</p>
<p>如果某些事件不断地反复发生，一般来说，使用stream模式是比部署Promise更好的选择。</p>
<p>下面是一个用Promise对象实现的Ajax操作的例子。</p>
<pre><code>var getJSON = function(url) {
  var promise = new Promise(function(resolve, reject){
    var client = new XMLHttpRequest();
    client.open(&quot;GET&quot;, url);
    client.onreadystatechange = handler;
    client.responseType = &quot;json&quot;;
    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);
    client.send();

    function handler() {
      if ( this.readyState !== 4 ) {
        return;
      }
      if (this.status === 200) {
        resolve(this.response);
      } else {
        reject(new Error(this.statusText));
      }
    };
  });

  return promise;
};

getJSON(&quot;/posts.json&quot;).then(function(json) {
  console.log(&apos;Contents: &apos; + json);
}, function(error) {
  console.error(&apos;出错了&apos;, error);
});
</code></pre><h2 id="异步操作和Async函数"><a href="#异步操作和Async函数" class="headerlink" title="异步操作和Async函数"></a>异步操作和Async函数</h2><p>ES6诞生以前，异步编程的方法，大概有下面四种。</p>
<ul>
<li>回调函数</li>
<li>事件监听</li>
<li>发布/订阅</li>
<li>Promise 对象</li>
</ul>
<p>ES6将JavaScript异步编程带入了一个全新的阶段，ES7的Async函数更是提出了异步编程的终极解决方案。</p>
<hr>
<h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><blockquote>
<p>JavaScript语言对异步编程的实现，就是回调函数。所谓回调函数，就是把任务的第二段单独写在一个函数里面，等到重新执行这个任务的时候，就直接调用这个函数。它的英语名字callback，直译过来就是”重新调用”。</p>
</blockquote>
<p>读取文件进行处理，是这样写的。</p>
<pre><code>fs.readFile(&apos;/etc/passwd&apos;, function (err, data) {
  if (err) throw err;
  console.log(data);
});
</code></pre><p>上面代码中，readFile函数的第二个参数，就是回调函数，也就是任务的第二段。等到操作系统返回了/etc/passwd这个文件以后，回调函数才会执行。</p>
<p>一个有趣的问题是，为什么Node.js约定，回调函数的第一个参数，必须是错误对象err（如果没有错误，该参数就是null）？原因是执行分成两段，在这两段之间抛出的错误，程序无法捕捉，只能当作参数，传入第二段。</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>回调函数本身并没有问题，它的问题出现在多个回调函数嵌套。假定读取A文件之后，再读取B文件，代码如下。</p>
<pre><code>fs.readFile(fileA, function (err, data) {
  fs.readFile(fileB, function (err, data) {
    // ...
  });
});
</code></pre><p>不难想象，如果依次读取多个文件，就会出现多重嵌套。代码不是纵向发展，而是横向发展，很快就会乱成一团，无法管理。这种情况就称为“回调函数噩梦”（callback hell）。</p>
<p>Promise就是为了解决这个问题而提出的。它不是新的语法功能，而是一种新的写法，允许将回调函数的横向加载，改成纵向加载。采用Promise，连续读取多个文件，写法如下。</p>
<pre><code>var readFile = require(&apos;fs-readfile-promise&apos;);

readFile(fileA)
.then(function(data){
  console.log(data.toString());
})
.then(function(){
  return readFile(fileB);
})
.then(function(data){
  console.log(data.toString());
})
.catch(function(err) {
  console.log(err);
});
</code></pre><p>上面代码中，我使用了fs-readfile-promise模块，它的作用就是返回一个Promise版本的readFile函数。Promise提供then方法加载回调函数，catch方法捕捉执行过程中抛出的错误。</p>
<p>可以看到，Promise 的写法只是回调函数的改进，使用then方法以后，异步任务的两段执行看得更清楚了，除此以外，并无新意。</p>
<p>Promise 的最大问题是代码冗余，原来的任务被Promise 包装了一下，不管什么操作，一眼看去都是一堆 then，原来的语义变得很不清楚。</p>
<h3 id="Generator函数"><a href="#Generator函数" class="headerlink" title="Generator函数"></a>Generator函数</h3><p>协程<br>传统的编程语言，早有异步编程的解决方案（其实是多任务的解决方案）。其中有一种叫做”协程”（coroutine），意思是多个线程互相协作，完成异步任务。</p>
<p>协程有点像函数，又有点像线程。它的运行流程大致如下。</p>
<ol>
<li>第一步，协程A开始执行。</li>
<li>第二步，协程A执行到一半，进入暂停，执行权转移到协程B。</li>
<li>第三步，（一段时间后）协程B交还执行权。</li>
<li>第四步，协程A恢复执行。</li>
</ol>
<p>上面流程的协程A，就是异步任务，因为它分成两段（或多段）执行。</p>
<p>举例来说，读取文件的协程写法如下。</p>
<pre><code>function *asnycJob() {
  // ...其他代码
  var f = yield readFile(fileA);
  // ...其他代码
}
</code></pre><p>上面代码的函数asyncJob是一个协程，它的奥妙就在其中的yield命令。它表示执行到此处，执行权将交给其他协程。也就是说，yield命令是异步两个阶段的分界线。</p>
<p>协程遇到yield命令就暂停，等到执行权返回，再从暂停的地方继续往后执行。它的最大优点，就是代码的写法非常像同步操作，如果去除yield命令，简直一模一样。</p>
<h4 id="异步任务的封装"><a href="#异步任务的封装" class="headerlink" title="异步任务的封装"></a>异步任务的封装</h4><p>下面看看如何使用 Generator 函数，执行一个真实的异步任务。</p>
<pre><code>var fetch = require(&apos;node-fetch&apos;);

function* gen(){
  var url = &apos;https://api.github.com/users/github&apos;;
  var result = yield fetch(url);
  console.log(result.bio);
}
</code></pre><p>上面代码中，Generator函数封装了一个异步操作，该操作先读取一个远程接口，然后从JSON格式的数据解析信息。就像前面说过的，这段代码非常像同步操作，除了加上了yield命令。</p>
<p>执行这段代码的方法如下。</p>
<pre><code>var g = gen();
var result = g.next();

result.value.then(function(data){
  return data.json();
}).then(function(data){
  g.next(data);
});
</code></pre><p>上面代码中，首先执行Generator函数，获取遍历器对象，然后使用next 方法（第二行），执行异步任务的第一阶段。由于Fetch模块返回的是一个Promise对象，因此要用then方法调用下一个next 方法。</p>
<p>可以看到，虽然 Generator 函数将异步操作表示得很简洁，但是流程管理却不方便（即何时执行第一阶段、何时执行第二阶段）。</p>
<h3 id="async函数"><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h3><blockquote>
<p>ES7提供了async函数，使得异步操作变得更加方便。async函数是什么？一句话，async函数就是Generator函数的语法糖。</p>
</blockquote>
<p>有一个Generator函数，依次读取两个文件。<br>    var fs = require(‘fs’);</p>
<pre><code>var readFile = function (fileName){
  return new Promise(function (resolve, reject){
    fs.readFile(fileName, function(error, data){
      if (error) reject(error);
      resolve(data);
    });
  });
};

var gen = function* (){
  var f1 = yield readFile(&apos;/etc/fstab&apos;);
  var f2 = yield readFile(&apos;/etc/shells&apos;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre><p>写成async函数，就是下面这样。</p>
<pre><code>var asyncReadFile = async function (){
  var f1 = await readFile(&apos;/etc/fstab&apos;);
  var f2 = await readFile(&apos;/etc/shells&apos;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre><p>一比较就会发现，async函数就是将Generator函数的星号（*）替换成async，将yield替换成await，仅此而已。</p>
<p>async函数对 Generator 函数的改进，体现在以下四点。</p>
<ol>
<li><p>内置执行器。Generator函数的执行必须靠执行器，所以才有了co模块，而async函数自带执行器。也就是说，async函数的执行，与普通函数一模一样，只要一行。</p>
<pre><code>var result = asyncReadFile();
</code></pre><p>上面的代码调用了asyncReadFile函数，然后它就会自动执行，输出最后结果。这完全不像Generator函数，需要调用next方法，或者用co模块，才能得到真正执行，得到最后结果。</p>
</li>
<li><p>更好的语义。async和await，比起星号和yield，语义更清楚了。async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。</p>
</li>
<li><p>更广的适用性。 co模块约定，yield命令后面只能是Thunk函数或Promise对象，而async函数的await命令后面，可以是Promise对象和原始类型的值（数值、字符串和布尔值，但这时等同于同步操作）。</p>
</li>
<li><p>返回值是Promise。async函数的返回值是Promise对象，这比Generator函数的返回值是Iterator对象方便多了。你可以用then方法指定下一步的操作。</p>
</li>
</ol>
<p>进一步说，async函数完全可以看作多个异步操作，包装成的一个Promise对象，而await命令就是内部then命令的语法糖。</p>
<p>正常情况下，await命令后面是一个Promise对象，否则会被转成Promise。</p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><p>JavaScript语言的传统方法是通过构造函数，定义并生成新对象。下面是一个例子。</p>
<pre><code>function Point(x,y){
  this.x = x;
  this.y = y;
}

Point.prototype.toString = function () {
  return &apos;(&apos; + this.x + &apos;, &apos; + this.y + &apos;)&apos;;
}
</code></pre><p>上面这种写法跟传统的面向对象语言（比如C++和Java）差异很大，很容易让新学习这门语言的程序员感到困惑。</p>
<p>ES6提供了更接近传统语言的写法，引入了Class（类）这个概念，作为对象的模板。通过class关键字，可以定义类。基本上，ES6的class可以看作只是一个语法糖，它的绝大部分功能，ES5都可以做到，新的class写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。上面的代码用ES6的“类”改写，就是下面这样。</p>
<pre><code>//定义类
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }
  toString() {
    return &apos;(&apos; + this.x + &apos;, &apos; + this.y + &apos;)&apos;;
  }
}
typeof Point // &quot;function&quot;
Point === Point.prototype.constructor // true
</code></pre><h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>在ES6之前，社区制定了一些模块加载方案，最主要的有CommonJS和AMD两种。前者用于服务器，后者用于浏览器。ES6在语言规格的层面上，实现了模块功能，而且实现得相当简单，完全可以取代现有的CommonJS和AMD规范，成为浏览器和服务器通用的模块解决方案。</p>
<p>ES6模块的设计思想，是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。CommonJS和AMD模块，都只能在运行时确定这些东西。比如，CommonJS模块就是对象，输入时必须查找对象属性。</p>
<pre><code>// CommonJS模块
let { stat, exists, readFile } = require(&apos;fs&apos;);
// 等同于
let _fs = require(&apos;fs&apos;);
let stat = _fs.stat, exists = _fs.exists, readfile = _fs.readfile;
// ES6模块
import { stat, exists, readFile } from &apos;fs&apos;;
</code></pre><h2 id="tip"><a href="#tip" class="headerlink" title="tip"></a>tip</h2><p>另外还有 <strong>修饰器（Decorator）</strong>这一点，会另开一篇文章讲。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/13/ES6新特性0/" itemprop="url">
                ES6新特性--表格
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-13T13:36:59+08:00" content="2016-02-13">
            2016-02-13
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/es6/" itemprop="url" rel="index">
                  <span itemprop="name">es6</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/es6/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/13/ES6新特性0/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/13/ES6新特性0/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>转载自 <a href="http://gejiawen.github.io/2015/07/28/es6-new-feature/#ES6新特性列表" target="_blank" rel="external">http://gejiawen.github.io/2015/07/28/es6-new-feature/#ES6新特性列表</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>新增特性</th>
<th style="text-align:right">关键词</th>
<th style="text-align:center">用法</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>箭头操作符</td>
<td style="text-align:right">Arrows</td>
<td style="text-align:center">v =&gt; console.log(v)</td>
<td style="text-align:center">类似于部分强类型语言中的lambda表达式</td>
</tr>
<tr>
<td>类的支持</td>
<td style="text-align:right">Classes</td>
<td style="text-align:center">-</td>
<td style="text-align:center">原生支持类，让javascript的OOP编码更加地道</td>
</tr>
<tr>
<td>增强的对象字面量</td>
<td style="text-align:right">enhanced object literals</td>
<td style="text-align:center">-</td>
<td style="text-align:center">增强对象字面量</td>
</tr>
<tr>
<td>字符串模板</td>
<td style="text-align:right">template strings</td>
<td style="text-align:center">${num}</td>
<td style="text-align:center">原生支持字符串模板，不再需要第三方库的支持</td>
</tr>
<tr>
<td>解构赋值</td>
<td style="text-align:right">destructuring</td>
<td style="text-align:center">[x, y] = [‘hello’, ‘world’]</td>
<td style="text-align:center">使用过python的话，你应该很熟悉这个语法</td>
</tr>
<tr>
<td>函数参数扩展</td>
<td style="text-align:right">default, rest, spread</td>
<td style="text-align:center">-</td>
<td style="text-align:center">函数参数可以使用默认值、不定参数以及拓展参数了</td>
</tr>
<tr>
<td>let、const</td>
<td style="text-align:right">let、const</td>
<td style="text-align:center">-</td>
<td style="text-align:center">javascript中可以使用块级作用域和声明常量了</td>
</tr>
<tr>
<td>for…of遍历</td>
<td style="text-align:right">for…of</td>
<td style="text-align:center">for (v of someArray) { … }</td>
<td style="text-align:center">又多了一种折腾数组、Map等数据结构的方法了</td>
</tr>
<tr>
<td>迭代器和生成器</td>
<td style="text-align:right">iterators, generator, iterables</td>
<td style="text-align:center">-</td>
<td style="text-align:center">ES6较为难以理解的新东西，后面会有相关文章</td>
</tr>
<tr>
<td>Unicode</td>
<td style="text-align:right">unicode</td>
<td style="text-align:center">-</td>
<td style="text-align:center">原生的unicode更加完美的支持</td>
</tr>
<tr>
<td>模块和模块加载</td>
<td style="text-align:right">modules, modules loader</td>
<td style="text-align:center">-</td>
<td style="text-align:center">ES6中开始支持原生模块化啦</td>
</tr>
<tr>
<td>map, set, weakmap, weakset</td>
<td style="text-align:right">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">新的数据结构</td>
</tr>
<tr>
<td>监控代理</td>
<td style="text-align:right">proxies</td>
<td style="text-align:center">-</td>
<td style="text-align:center">我们可以监听对象发生了哪些事，并可以自定义对应的操作</td>
</tr>
<tr>
<td>Symbols</td>
<td style="text-align:right">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">我们可以使用symbol来创建一个不同寻常的key，<strong>七种数据类型(null,undefine,int,String,bolloen,object,Symbol)</strong></td>
</tr>
<tr>
<td>Promises</td>
<td style="text-align:right">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">这家伙经常在讨论异步处理流程时被提到</td>
</tr>
<tr>
<td>新的API</td>
<td style="text-align:right">math, number, string, array, object</td>
<td style="text-align:center">-</td>
<td style="text-align:center">原生的功能性API就是方便些</td>
</tr>
<tr>
<td>内置对象可以被继承</td>
<td style="text-align:right">subclassable built-ins</td>
<td style="text-align:center">-</td>
<td style="text-align:center">可以基于内置对象，比如Array，来生成一个类</td>
</tr>
<tr>
<td>二进制、八进制字面量</td>
<td style="text-align:right">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">可以直接在es6中使用二进制或者八进制字面量了 <strong>(for WebGL)</strong></td>
</tr>
<tr>
<td>Reflect API</td>
<td style="text-align:right">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">反射API？</td>
</tr>
<tr>
<td>尾调用</td>
<td style="text-align:right">tail calls</td>
<td style="text-align:center">-</td>
<td style="text-align:center">ES6中会自动帮你做一些尾递归方面的优化</td>
</tr>
</tbody>
</table>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/10/html-css-javascript-weekly/" itemprop="url">
                html css javascript weekly
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-10T23:21:09+08:00" content="2016-02-10">
            2016-02-10
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/10/html-css-javascript-weekly/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/10/html-css-javascript-weekly/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="jCanvas"><a href="#jCanvas" class="headerlink" title="jCanvas"></a>jCanvas</h2><blockquote>
<p>A free and open source jQuery-based library for the HTML5 Canvas API. </p>
</blockquote>
<h2 id="cssGram"><a href="#cssGram" class="headerlink" title="cssGram"></a>cssGram</h2><blockquote>
<p>Instagram filter library in Sass and CSS.</p>
</blockquote>
<p>利用css做滤镜 <a href="https://github.com/una/CSSgram" target="_blank" rel="external">https://github.com/una/CSSgram</a></p>
<h2 id="medium-editor"><a href="#medium-editor" class="headerlink" title="medium-editor"></a>medium-editor</h2><p>This is a clone of medium.com inline editor toolbar.</p>
<p>MediumEditor has been written using vanilla JavaScript, no additional frameworks required.</p>
<p><a href="https://github.com/yabwe/medium-editor" target="_blank" rel="external">github地址</a></p>
<h2 id="chrome新属性：MediaRecorder"><a href="#chrome新属性：MediaRecorder" class="headerlink" title="chrome新属性：MediaRecorder"></a>chrome新属性：MediaRecorder</h2><p>The MediaRecorder API enables you to record audio and video from the Web. It’s available now in Firefox and in Chrome for Android and desktop.</p>
<h2 id="voxel-css"><a href="#voxel-css" class="headerlink" title="voxel.css"></a>voxel.css</h2><p>makes 3D rendering easy<br><a href="https://github.com/HunterLarco/voxel.css" target="_blank" rel="external">github地址</a></p>
<h2 id="babel-webpack-gulp"><a href="#babel-webpack-gulp" class="headerlink" title="babel+webpack+gulp"></a>babel+webpack+gulp</h2><blockquote>
<p>So far we’ve stepped through a quick evolution of using babel and webpack’s CLIs to build our library, then moved on to use gulp (and related plugins) to handle the build for us. The code related to this post includes an example/ directory with both a browser- and node-based example of our working transpiled module. </p>
</blockquote>
<h2 id="SamsaraJS"><a href="#SamsaraJS" class="headerlink" title="SamsaraJS"></a>SamsaraJS</h2><p>SamsaraJS is a functional reactive library for animating layout. It provides a language for positioning, orienting and sizing DOM elements and animating these properties over time. Everything in SamsaraJS — from the user input to the rendering pipeline — is a stream. Building a user interface becomes the art of composing streams.<a href="https://github.com/dmvaldman/samsara" target="_blank" rel="external">github地址</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/02/05/css-animation制作动画/" itemprop="url">
                CSS3 timing-function steps() 详解(转载)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-02-05T22:37:52+08:00" content="2016-02-05">
            2016-02-05
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/02/05/css-animation制作动画/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/05/css-animation制作动画/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>在家快冻疯了，打字好冷，最近在看 <a href="http://www.w3cplus.com/animation/dragon-dance-opening-animation.html" title="手淘年货节舞龙揭幕动画实战" target="_blank" rel="external">手淘年货节舞龙揭幕动画实战</a> 发现animation做动画很简单</p>
<blockquote>
<p>下面直接转载一篇讲steps的文章，文章地址 <a href="https://idiotwu.me/understanding-css3-timing-function-steps/#toc-5" target="_blank" rel="external">https://idiotwu.me/understanding-css3-timing-function-steps/#toc-5</a></p>
</blockquote>
<h2 id="不堪回首的过往"><a href="#不堪回首的过往" class="headerlink" title="不堪回首的过往"></a>不堪回首的过往</h2><p>在应用 CSS3 渐变/动画时，有个控制时间的属性 <timing-function>。它的取值中除了常用到的 <a href="http://cubic-bezier.com/#.25,.1,.25,1" title="三次贝塞尔曲线" target="_blank" rel="external">三次贝塞尔曲线</a> 以外，还有个让人比较困惑的 steps() 函数。在许多相关文章里，关于这个函数的解释都比较含糊其辞，比如：</timing-function></p>
<blockquote>
<p>steps() 第一个参数 number 为指定的间隔数，即把动画分为 n 步阶段性展示，第二个参数默认为 end，设置最后一步的状态，start 为结束时的状态，end 为开始时的状态。</p>
</blockquote>
<p>又如：</p>
<blockquote>
<p>steps 有两个参数</p>
<p>第一个肯定是分几步执行完<br>第二个有两个值<br>  start 第一帧是第一步动画结束<br>  end 第一帧是第一步动画开始</p>
</blockquote>
<p>年少无知的我轻易就相信了大家的说法，每次应用 steps() 函数时都要先考虑一番：嗯，start 对应末态，end 对应初态，末态是 OOOO，初态是 XXXX……卧槽！跑起来不对！</p>
<h2 id="一探究竟"><a href="#一探究竟" class="headerlink" title="一探究竟"></a>一探究竟</h2><p>被坑得团团转之后，只好向组织求助。于是查到了这样的规定：</p>
<blockquote>
<p>steps: specifies a stepping function, described above, taking two parameters. The first parameter specifies the number of intervals in the function. It must be a positive integer (greater than 0). The second parameter, which is optional, is either the value ‘start’ or ‘end’, and specifies the point at which the change of values occur within the interval. If the second parameter is omitted, it is given the value ‘end’.</p>
</blockquote>
<p>粗略翻译如下：<strong>steps 函数指定了一个阶跃函数，第一个参数指定了时间函数中的间隔数量（必须是正整数）；第二个参数可选，接受 start 和 end 两个值，指定在每个间隔的起点或是终点发生阶跃变化，默认为 end。</strong></p>
<p>这样理解起来可能还是有点抽象，我们来个实例：</p>
<pre><code>#demo {
  animation-iteration-count: 2;
  animation-duration: 3s;
}
</code></pre><p>这是一个 3s * 2 的动画，我们分别对它应用 steps(3, start) 和 steps(3, end)，做出阶跃函数曲线如下：</p>
<h3 id="steps-3-start"><a href="#steps-3-start" class="headerlink" title="steps(3, start)"></a>steps(3, start)</h3><p><img src="http://7xltvd.com1.z0.glb.clouddn.com/steps-3-start.png" alt="Alt" title="start"></p>
<p>steps() 第一个参数将动画分割成三段。当指定跃点为 start 时，动画在每个计时周期的起点发生阶跃（即图中空心圆 → 实心圆）。<strong>由于第一次阶跃发生在第一个计时周期的起点处（0s），所以我们看到的第一步动画（初态）就为 1/3 的状态，因此在视觉上动画的过程为 1/3 → 2/3 → 1 。</strong></p>
<p>如果翻译成 JavaScript，大致如下：</p>
<pre><code>var animateAtStart = function (steps, duration) {  
    var current = 0;
    var interval = duration / steps;
    var timer = function () {
        current++;
        applyStylesAtStep(current);
        if (current &lt; steps) {
            setTimeout(timer, interval);
        }
    };
    timer();
};
</code></pre><h3 id="steps-3-end"><a href="#steps-3-end" class="headerlink" title="steps(3, end)"></a>steps(3, end)</h3><p><img src="http://7xltvd.com1.z0.glb.clouddn.com/steps-3-end.png" alt="Alt" title="end"></p>
<p>当指定跃点为 end，<strong>动画则在每个计时周期的终点发生阶跃（即图中空心圆 → 实心圆）。由于第一次阶跃发生在第一个计时周期结束时（1s），所以我们看到的初态为 0% 的状态；而在整个动画周期完成处（3s），虽然发生阶跃跳到了 100% 的状态，但同时动画结束，所以 100% 的状态不可视。因此在视觉上动画的过程为 0 → 1/3 → 2/3</strong>（回忆一下数电里的异步清零，当所有输出端都为高电平的时候触发清零，所以全为高电平是暂态）。</p>
<p>同样翻译成 JavaScript 如下：</p>
<pre><code>var animateAtEnd = function (steps, duration) {  
    var current = 0;
    var interval = duration / steps;
    var timer = function () {
        applyStylesAtStep(current);
        current++;
        if (current &lt; steps) {
            setTimeout(timer, interval);
        }
    };
    timer();
};
</code></pre><p>如果这样的解释还是让你觉得云里雾里，可以参考 <a href="https://idiotwu.me/study/timing-function/" title="交互 DEMO" target="_blank" rel="external">交互 DEMO</a></p>
<h2 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h2><p>虽然写了这么多，但还是不得不说一句 timing-function: steps() 在实际设计中的应用少之又少，但是配合一些奇淫技巧还是能做出一些不错的效果：</p>
<h3 id="定时遮罩"><a href="#定时遮罩" class="headerlink" title="定时遮罩"></a>定时遮罩</h3><p>在CSS3 环形进度条这篇文章里，我们曾用到 timing-function 来使半圆环定时显示/隐藏：</p>
<pre><code>$precent: 5; // 进度百分比
$duration: 2s; // 动画时长
@keyframes toggle {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
.progress-right {
    // 初态为 opacity: 0; 动画周期结束后为 opacity: 1;
    opacity: 1;
    animation: toggle ($duration * 50 / $precent) step-end; // step-end = steps(1, end)
}
.progress-cover {
    // 初态为 opacity: 1; 动画周期结束后为 opacity: 0;
    opacity: 0;
    animation: toggle ($duration * 50 / $precent) step-start; // step-start = steps(1, start)
}
</code></pre><p>这里的关键是使用了 step-start 与 step-end 控制动画，因为动画只有两个关键帧，参考上文可以得出：</p>
<blockquote>
<p>step-start：动画一开始就跳到 100% 直到周期结束</p>
<p>step-end：保持 0% 的样式直到周期结束</p>
</blockquote>
<p>要注意的是，timing-function 是作用于每两个关键帧之间，而不是整个动画（the ‘animation-timing-function’ applies between keyframes, not over the entire animation），所以就有了张鑫旭老师在小tip: CSS3 animation渐进实现点点点等待提示效果一文中得出的结论：</p>
<blockquote>
<p>step-start, 顾名思意，“一步一步开始”，表现在动画中就是一帧一帧播放、一顿一顿画面</p>
</blockquote>
<h3 id="Sprite-精灵动画"><a href="#Sprite-精灵动画" class="headerlink" title="Sprite 精灵动画"></a>Sprite 精灵动画</h3><p>在CSS3 实现奔跑动画这篇文章里，我们使用 CSS3 Animation 来实现游戏开发中的精灵动画：</p>
<pre><code>$spriteWidth: 140px; // 精灵宽度 
@keyframes run {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: -($spriteWidth * 12) 0; // 12帧
  }
}
#sprite {
  width: $spriteWidth;
  height: 144px;
  background: url(&quot;../images/sprite.png&quot;) 0 0 no-repeat;
  animation: run 0.6s steps(12) infinite;
}
</code></pre><p>其原理是：使用一张含有多帧静态画面的图片，通过切换 background-position 使其变为连续的动画。</p>
<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><p><a href="http://jsbin.com/daluqov/1" target="_blank" rel="external">http://jsbin.com/daluqov/1</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/28/settimeout-setInterval传递参数/" itemprop="url">
                settimeout/setInterval传递参数
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-28T21:30:49+08:00" content="2016-01-28">
            2016-01-28
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/28/settimeout-setInterval传递参数/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/28/settimeout-setInterval传递参数/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p><strong>用闭包</strong></p>
</blockquote>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>阮一峰老师讲解闭包的原理<br><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html</a></p>
<p>example</p>
<pre><code>//error
var a = new Array();   
var i;   
for(i=0;i&lt;3;i++){   
//此处表示a[i] = object(function是一个对象)
  a[i] = function(num){
    return num;
  }; 
}   
console.log(a[2]);

//right
var a = new Array();   
var i;   
for(i=0;i&lt;3;i++){ 
// 自执行函数
  a[i] = function(num){
    return num;
  }(i); 
}   
console.log(a[2]);
</code></pre><h2 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h2><blockquote>
<p>settimeout/setInterval无法直接传递参数，如下代码</p>
</blockquote>
<pre><code>var temp = &apos;success&apos;;
var foo = function(test) {
    alert(test);
};
setTimeout(foo(temp), 3000);
</code></pre><p>上面的代码执行时，会立即执行foo函数，并将返回值作为setTimeout函数的参数传递，显然是不正确的</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><pre><code>setTimeout(&quot;foo(temp)&quot;,3000);
</code></pre><h3 id="闭包-1"><a href="#闭包-1" class="headerlink" title="闭包"></a>闭包</h3><blockquote>
<p>定义了一个函数_foo，用于接收一个参数，并返回一个不带参数的函数，在这个函数内部使用了外部函数的参数，从而对其调用，不需要使用参数</p>
</blockquote>
<pre><code>var temp = &apos;success&apos;;
function _foo(temp){
  return function(){
    alert(temp);
  };
}
setTimeout(_foo(temp), 3000);
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/25/web中font字体研究/" itemprop="url">
                web中font字体研究
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-25T19:29:13+08:00" content="2016-01-25">
            2016-01-25
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/" itemprop="url" rel="index">
                  <span itemprop="name">html</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/tool/" itemprop="url" rel="index">
                  <span itemprop="name">tool</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/25/web中font字体研究/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/25/web中font字体研究/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近一直在优化悠客生鲜以及我自己的网站，发现之前字体一直出问题比较丑，决定深入一下字体方面的知识</p>
</blockquote>
<h2 id="tip"><a href="#tip" class="headerlink" title="tip"></a>tip</h2><p>中文字体尽量不要使用@font-face,主要是中文字体的文件一般比较大，使用起来不是很划算，西文字体还是可以用的，毕竟只有26个字符</p>
<h2 id="建议使用字体"><a href="#建议使用字体" class="headerlink" title="建议使用字体"></a>建议使用字体</h2><p>mac</p>
<ul>
<li>冬青黑体 Hiragino Sans GB</li>
<li>黑体-简 Heiti SC</li>
<li>华文黑体 STHeiti</li>
</ul>
<p>Windows </p>
<ul>
<li>中易宋体 SimSun</li>
<li>微软雅黑 Microsoft YaHei</li>
</ul>
<p>Linux</p>
<ul>
<li>文泉驿微米黑 WenQuanYi Microhei</li>
</ul>
<p>iOS</p>
<ul>
<li>黑体-简 Heiti SC</li>
<li>华文黑体 STHeiti</li>
</ul>
<p>android</p>
<ul>
<li>思源黑体 Noto Sans CJK SC</li>
<li>Droid Sans Fallback</li>
</ul>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><pre><code>font-family: Helvetica, Tahoma, Arial, STXihei, &quot; 华文细黑 &quot;, &quot;Microsoft YaHei&quot;, &quot; 微软雅黑 &quot;, sans-serif;
</code></pre><ol>
<li>对于英文字符，首先查找Helvetica(Mac)，然后查找Tahoma(Win)，都找不到就用Arial(Mac&amp;Win)；若是以上三者都缺失，则使用当前默认的sans-serif字体 (操作系统或浏览器指定)；</li>
<li>对于中文字体，我们已经了解其规则了。华文细黑(Mac)，微软雅黑(Win) 是这两个平台的默认中文字体。</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><blockquote>
<p>这两篇文章讲的非常好</p>
<ul>
<li><a href="http://yuehu.io/web-developer/348" target="_blank" rel="external">http://yuehu.io/web-developer/348</a></li>
<li><a href="http://aaaaaashu.me/shu/" target="_blank" rel="external">http://aaaaaashu.me/shu/</a></li>
</ul>
</blockquote>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/24/Web前端开发规范文档/" itemprop="url">
                Web前端开发规范文档(转载)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-24T15:34:20+08:00" content="2016-01-24">
            2016-01-24
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/" itemprop="url" rel="index">
                  <span itemprop="name">html</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/js/css/" itemprop="url" rel="index">
                  <span itemprop="name">css</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/24/Web前端开发规范文档/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/24/Web前端开发规范文档/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>转载的github地址 <a href="https://github.com/kahn1990/web_develop_standard" target="_blank" rel="external">https://github.com/kahn1990/web_develop_standard</a></p>
</blockquote>
<h3 id="规范目的："><a href="#规范目的：" class="headerlink" title="规范目的："></a>规范目的：</h3><hr>
<blockquote>
<ul>
<li>使开发流程更加规范化。</li>
</ul>
</blockquote>
<h3 id="通用规范："><a href="#通用规范：" class="headerlink" title="通用规范："></a>通用规范：</h3><hr>
<blockquote>
<ul>
<li>TAB键用两个空格代替（<code>WINDOWS</code>下TAB键占四个空格，<code>LINUX</code>下TAB键占八个空格）。</li>
<li><code>CSS</code>样式属性或者<code>JAVASCRIPT</code>代码后加“;”方便压缩工具“断句”。</li>
<li>文件内容编码均统一为<code>UTF-8</code>。</li>
<li><code>CSS</code>、<code>JAVASCRIPT</code>中的非注释类中文字符须转换成unicode编码使用,以避免编码错误时乱码显示。</li>
</ul>
</blockquote>
<h3 id="文件规范："><a href="#文件规范：" class="headerlink" title="文件规范："></a>文件规范：</h3><hr>
<blockquote>
<ul>
<li>文件名用英文单词，多个单词用驼峰命名法。</li>
<li>一些浏览器会将含有这些词的作为广告拦截，文件命名、ID、CLASS等所有命名避免以上词汇。<br>ad、ads、adv、banner、sponsor、gg、guangg、guanggao等。</li>
</ul>
</blockquote>
<h3 id="html书写规范："><a href="#html书写规范：" class="headerlink" title="html书写规范："></a>html书写规范：</h3><hr>
<blockquote>
<ul>
<li><p>为每个<code>HTML</code>页面的第一行添加标准模式（standard mode）的声明，确保在每个浏览器中拥有一致的展现。</p>
<pre><code>&lt;!DOCTYPE html&gt;     
</code></pre><p><code>文档类型声明</code>统一为HTML5声明类型，<code>编码</code>统一为UTF-8。</p>
<pre><code>&lt;meta charset=&quot;UTF-8&quot;&gt;
</code></pre><p><code>&lt;HEAD&gt;</code>中添加信息。</p>
<pre><code>&lt;meta name=&quot;author&quot; content=&quot;smile@kang.cool&quot;&gt;//作者
&lt;meta name=&quot;description&quot; content=&quot;hello&quot;&gt;//网页描述
&lt;meta name=&quot;keywords&quot; content=&quot;a,b,c&quot;&gt;//关键字,“，”分隔
&lt;meta http-equiv=&quot;expires&quot; content=&quot;Wed, 26 Feb 1997 08：21：57 GMT&quot;&gt;//设定网页的到期时间。一旦网页过期，必须到服务器上重新调阅
&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;&gt;//禁止浏览器从本地机的缓存中调阅页面内容
&lt;meta http-equiv=&quot;Window-target&quot; content=&quot;_top&quot;&gt;//用来防止别人在框架里调用你的页面
&lt;meta http-equiv=&quot;Refresh&quot; content=&quot;5;URL=http://kahn1990.com/&quot;&gt;//跳转页面，5指时间停留5秒 网页搜索机器人向导。用来告诉搜索机器人哪些页面需要索引，哪些页面不需要索引
&lt;meta name=&quot;robots&quot; content=&quot;none&quot;&gt;//content的参数有all,none,index,noindex,follow,nofollow，默认是all
&lt;link rel=&quot;Shortcut Icon&quot; href=&quot;favicon.ico&quot;&gt;//收藏图标
&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache, must-revalidate&quot;&gt;//网页不会被缓存
</code></pre><p><code>IE</code>支持通过特定&lt;meta&gt;标签来确定绘制当前页面所应该采用的<code>IE</code>版本。除非有强烈的特殊需求，否则最好是设置为<code>edge mode</code> ，从而通知<code>IE</code>采用其所支持的最新的模式。</p>
<pre><code>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=Edge&quot;&gt;
</code></pre></li>
<li><p>非特殊情况下<code>CSS</code>样式文件外链至HEAD之间，<code>JAVASCRIPT</code>文件外链至页面底部。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/main.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- 逻辑代码 --&gt;
    &lt;!-- 逻辑代码底部 --&gt;
    &lt;script src=&quot;lib/jquery/jquery-2.1.1.min.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>引入<code>JAVASCRIPT</code>库文件，文件名须包含库名称及版本号及是否为压缩版。</p>
<pre><code>jQuery-1.8.3.min.js
</code></pre><p>引入<code>JAVASCRIPT</code>插件, 文件名格式为库名称+<code>.</code>+插件名称。</p>
<pre><code>jQuery.cookie.js
</code></pre></li>
<li><p><code>HTML</code>属性应当按照以下给出的顺序依次排列，来确保代码的易读性。</p>
<pre><code>class
id 、 name
data-*
src、for、 type、 href
title、alt
aria-*、 role
</code></pre><p>编码均遵循<code>XHTML</code>标准,<br>标签、属性、属性命名由小写英文、数字和_组成，且所有标签必须闭合，属性值必须用双引号<code>&quot;&quot;</code>,<br>避免使用中文拼音尽量简易并要求语义化。</p>
<pre><code>CLASS --&gt; nHeadTitle --&gt; CLASS遵循小驼峰命名法（little camel-case）
ID --&gt; n_head_title --&gt; ID遵循名称+_
NAME --&gt; N_Head_Title --&gt; NAME属性命名遵循首个字母大写+_
&lt;div class=&quot;nHeadTitle&quot; id=&quot;n_head_title&quot; name=&quot;N_Head_Title&quot;&gt;&lt;/div&gt;
</code></pre><p>当<code>JAVASCRIPT</code>获取单个元素时，通常使用document.getElementById来获取dom元素，document.getElementById兼容所有浏览器，但IE浏览器会混淆元素的ID和NAME属性，所以要区分ID和NAME命名。</p>
<pre><code>&lt;input type=&quot;text&quot; name=&quot;test&quot;&gt;
&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;
&lt;button onclick=&quot;alert(document.getElementById(&apos;test&apos;).tagName)&quot;&gt;&lt;/button&gt;
&lt;!-- ie6下为INPUT --&gt;
</code></pre></li>
<li><p>特殊符号应使用转意符。</p>
<pre><code>&lt;    --&gt;    &amp;lt;
</code></pre><p>–&gt;    &gt;</p>
<pre><code>空格  --&gt;    &amp;nbsp;
</code></pre></li>
<li><p>含有描述性表单元素（<code>INPUT</code>，<code>TEXTAREA</code>）添加<code>LABEL</code>。</p>
<pre><code>&lt;p&gt;
    &lt;label for=&quot;test&quot;&gt;测试&lt;/label&gt;
    &lt;input type=&quot;text&quot; id=&quot;test&quot; /&gt;
&lt;/p&gt;
</code></pre></li>
<li>多用无兼容性问题的<code>HTML</code>内置标签,比如SPAN、EM、STRONG、OPTGROUP、LABEL等,需要自定义<code>HTML</code>标签属性时，首先考虑是否存在已有的合适标签可替换，如果没有,可使用须以“<code>data-</code>”为前缀来添加自定义属性，避免使用其他命名方式。</li>
<li>语义化<code>HTML</code>。</li>
<li>尽可能减少<code>&lt;DIV&gt;</code>嵌套。</li>
<li><p>书写链接地址时避免重定向。</p>
<pre><code>href=&quot;http://www.kahn1990.com/&quot; //即在URL地址后面加“/”
</code></pre></li>
<li><code>HTML</code>中对于属性的定义，确保全部使用双引号，绝不要使用单引号</li>
</ul>
</blockquote>
<h3 id="css书写规范："><a href="#css书写规范：" class="headerlink" title="css书写规范："></a>css书写规范：</h3><hr>
<blockquote>
<ul>
<li><p>为了欺骗<code>W3C</code>的验证工具,可将代码分为两个文件，一个是针对所有浏览器,一个只针对IE。即将所有符合<code>W3C</code>的代码写到一个文件中,而一些IE中必须而又不能通过<code>W3C</code>验证的代码（如:<code>cursor:hand;</code>）放到另一个文件中，再用下面的方法导入。</p>
<pre><code>&lt;!-- 放置所有浏览器样式--&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&quot;&gt;
&lt;!-- 只放置IE必须，而不能通过w3c的--&gt;
&lt;!--[if IE]
    &lt;link rel=&quot;stylesheet&quot; href=&quot;&quot;&gt;
&lt;![endif]--&gt;
</code></pre></li>
<li><p><code>CSS</code>样式新建或修改尽量遵循以下原则。</p>
<pre><code>根据新建样式的适用范围分为三级：全站级、产品级、页面级。
尽量通过继承和层叠重用已有样式。
不要轻易改动全站级CSS。改动后，要经过全面测试。
</code></pre></li>
<li><p><code>CSS</code>属性显示顺序。</p>
<pre><code>显示属性
元素位置
元素属性
元素内容属性
</code></pre></li>
<li><p><code>CSS</code>书写顺序。</p>
<pre><code>.header {
/* 显示属性 */
    display || visibility
    list-style
    position top || right || bottom || left
    z-index
    clear
    float
/* 自身属性 */
    width max-width || min-width
    height max-height || min-height
    overflow || clip
    margin
    padding
    outline
    border
    background
/* 文本属性 */
    color
    font
    text-overflow
    text-align
    text-indent
    line-height
    white-space
    vertical-align
    cursor
    content
};
</code></pre><p>兼容多个浏览器时，将标准属性写在底部。</p>
<pre><code>-moz-border-radius: 15px; /* Firefox */
-webkit-border-radius: 15px; /* Safari和Chrome */
border-radius: 15px; /* Opera 10.5+, 以及使用了IE-CSS3的IE浏览器 *//标准属性
</code></pre></li>
<li><p>使用选择器时，命名比较短的词汇或者缩写的不允许直接定义样式。</p>
<pre><code>.hd,.bd,.td{};//如这些命名
</code></pre><p>可用上级节点进行限定。</p>
<pre><code>.recommend-mod .hd
</code></pre><p>多选择器规则之间换行，即当样式针对多个选择器时每个选择器占一行。</p>
<pre><code>button.btn,
input.btn,
input[type=&quot;button&quot;] {…};
</code></pre><p>优化<code>CSS</code>选择器。</p>
<pre><code>#header a { color: #444; };/*CSS选择器是从右边到左边进行匹配*/
</code></pre><p>浏览器将检查整个文档中的所有链接和每个链接的父元素，并遍历文档树去查找ID为header的祖先元素，如果找不到header将追溯到文档的根节点，解决方法如下。</p>
<pre><code>避免使用通配规则和相邻兄弟选择符、子选择符,、后代选择符、属性选择符等选择器
不要限定id选择符，如div#header（提权的除外）
不要限定类选择器，如ul.recommend（提权的除外）
不要使用 ul li a 这样长的选择符
避免使用标签子选择符，如#header &gt; li &gt; a
</code></pre></li>
<li>使用<code>z-index</code>属性尽量<code>z-index</code>的值不要超过150（通用组的除外），页面中的元素内容的<code>z-index</code>不能超过10（提示框等模块除外但维持在150以下），不允许直接使用（999~9999）之间大值。</li>
<li><p>尽量避免使用CSS Hack。</p>
<pre><code>property:value; /* 所有浏览器 */
+property:value; /* IE7 */
_property:value; /* IE6 */
*property:value; /* IE6/7 */
property:value\9; /* IE6/7/8/9，即所有IE浏览器 */

* html selector { … }; /* IE6 */
*:first-child+html selector { … }; /* IE7 */
html&gt;body selector { … }; /* 非IE6 */
@-moz-document url-prefix() { … }; /* firefox */
@media all and (-webkit-min-device-pixel-ratio:0) { … }; /* saf3+/chrome1+ */
@media all and (-webkit-min-device-pixel-ratio:10000),not all and (-webkit-min-device-pixel-ratio:0) { … }; /* opera */
@media screen and (max-device-width: 480px) { … }; /* iPhone/mobile webkit */
</code></pre><p>避免使用低效的选择器。</p>
<pre><code>body &gt; * {…};
ul &gt; li &gt; a {…};
#footer &gt; h3 {…};
ul#top_blue_nav {…};
searbar span.submit a { … }; /* 反面示例 */
</code></pre></li>
<li><p>六个不要三个避免一个使用。</p>
<pre><code>不要在标签上直接写样式
不要在CSS中使用expression
不要在CSS中使用@import
不要在CSS中使用!important
不要在CSS中使用“*”选择符
不要将CSS样式写为单行
避免使用filter
避免使用行内（inline）样式
避免使用“*”设置{margin: 0; padding: 0;}
使用after或overflow的方式清浮动
</code></pre></li>
<li><p>减少使用影响性能的属性。</p>
<pre><code>position:absolute;
float:left;//如这些定位或浮动属性

减少在`CSS`中使用滤镜表达式和图片repeat,
尤其在body当中,渲染性能极差, 如果需要用repeat的话,
图片的宽或高不能少于8px。
</code></pre></li>
</ul>
</blockquote>
<h3 id="javaScript书写规范："><a href="#javaScript书写规范：" class="headerlink" title="javaScript书写规范："></a>javaScript书写规范：</h3><hr>
<blockquote>
<ul>
<li><p>命名规范。</p>
<pre><code>常量名
    全部大写并单词间用下划线分隔
    如：CSS_BTN_CLOSE、TXT_LOADING

对象的属性或方法名
    小驼峰式（little camel-case）
    如：init、bindEvent、updatePosition
    示例：Dialog.prototype = {
            init: function () {},
            bindEvent: function () {},
            updatePosition: function () {}
             …
        };
类名（构造器）
    --&gt;小驼峰式但首字母大写
    --&gt;如：Current、DefaultConfig
函数名
    --&gt;小驼峰式
    --&gt;如：current()、defaultConfig()
变量名
    --&gt;小驼峰式
    --&gt;如：current、defaultConfig
私有变量名
    --&gt;小驼峰式但需要用_开头
    --&gt;如：_current、_defaultConfig
变量名的前缀
    --&gt;续
</code></pre></li>
<li><p>代码格式。</p>
<pre><code>&quot;()&quot;前后需要跟空格
&quot;=&quot;前后需要跟空格
&quot;,&quot;后面需要跟空格
JSON对象需格式化对象参数
if、while、for、do语句的执行体用&quot;{}&quot;括起来
</code></pre><p>“{}”格式如下。</p>
<pre><code>if (a==1) {
    //代码
};
</code></pre><p>避免额外的逗号。</p>
<pre><code>var arr = [1,2,3,];
</code></pre><p><code>for-in</code>循环体中必须用<code>hasOwnProperty</code>方法检查成员是否为自身成员，避免来自原型链上的污染。</p>
</li>
<li><p>长语句可考虑断行。</p>
<pre><code>TEMPL_SONGLIST.replace(&apos;{TABLE}&apos;, da[&apos;results&apos;])
    .replace(&apos;{PREV_NUM}&apos;, prev)
    .replace(&apos;{NEXT_NUM}&apos;, next)
    .replace(&apos;{CURRENT_NUM}&apos;, current)
    .replace(&apos;{TOTAL_NUM}&apos;, da.page_total);
</code></pre><p>为了避免和<code>JSLint</code>的检验机制冲突，“.”或“+”这类操作符放在行尾。</p>
<pre><code>TEMPL_SONGLIST.replace(&apos;{TABLE}&apos;, da[&apos;results&apos;]).
    replace(&apos;{PREV_NUM}&apos;, prev).
    replace(&apos;{NEXT_NUM}&apos;, next).
    replace(&apos;{CURRENT_NUM}&apos;, current).
    replace(&apos;{TOTAL_NUM}&apos;, da.page_total);
</code></pre><p>如果模块代码中，使用其它全局变量想跳过JSLint的检查，可以在该文件中加入<code>/*global*/</code>声明。</p>
<pre><code>/*global alert: true, console: true, top: true, setTimeout: true */
</code></pre></li>
<li><p>使用严格的条件判断符。用===代替==，用!==代替!=，避免掉入==造成的陷阱<br>在条件判断时，这样的一些值表示false。</p>
<pre><code>null
undefined与null相等
字符串&apos;&apos;
数字0
NaN
</code></pre><p>在==时，则会有一些让人难以理解的陷阱。</p>
<pre><code>(function () {
    var undefined;
    undefined == null; // true
    1 == true; //true
    2 == true; // false
    0 == false; // true
    0 == &apos;&apos;; // true
    NaN == NaN;// false
    [] == false; // true
    [] == ![]; // true
})();
</code></pre><p>对于不同类型的 == 判断，有这样一些规则，顺序自上而下：</p>
<pre><code>undefined与null相等
一个是number一个是string时，会尝试将string转换为number
尝试将boolean转换为number
0或1
尝试将Object转换成number或string
</code></pre><p>而这些取决于另外一个对比量，即值的类型，所以对于0、空字符串的判断，建议使用<code>===</code><br>。<code>===</code>会先判断两边的值类型，类型不匹配时为<code>false</code>。</p>
</li>
<li><p>下面类型的对象不建议用new构造。</p>
<pre><code>new Number
new String
new Boolean
new Object //用{}代替
new Array //用[]代替
</code></pre><p>引用对象成员用<code>obj.prop</code>代替<code>obj[&quot;prop&quot;]</code>，除非属性名是变量。</p>
</li>
<li><p>从number到string的转换。</p>
<pre><code>/** 推荐写法*/
var a = 1;
typeof(a); //&quot;number&quot;
console.log(a); //1
var aa=a+&apos;&apos;;
typeof(aa); //&quot;string&quot;
console.log(aa); //&apos;1&apos;
/** 不推荐写法*/
new String(a)或a.toString()
</code></pre><p>从string到number的转换，使用parseInt，必须显式指定第二个参数的进制。</p>
<pre><code>/** 推荐写法*/
var a = &apos;1&apos;;
var aa = parseInt(a,10);
typeof(a); //&quot;string&quot;
console.log(a); //&apos;1&apos;
typeof(aa); //&quot;number&quot;
console.log(aa); //1
</code></pre><p>从float到integer的转换。</p>
<pre><code>/** 推荐写法*/
Math.floor/Math.round/Math.ceil
/** 不推荐写法*/
parseInt
</code></pre><p>字符串拼接应使用数组保存字符串片段，使用时调用join方法。避免使用+或+=的方式拼接较长的字符串，每个字符串都会使用一个小的内存片段，过多的内存片段会影响性能。</p>
<pre><code>/**推荐的拼接方式array的push、join*/
var str=[],
    list=[&apos;测试A&apos;,&apos;测试B&apos;];
for (var i=0 , len=list.length; i &lt; len; i++) {
    str.push( &apos;&lt;div&gt;&apos;+ list[i] + &apos;&lt;/div&gt;&apos;);
};
console.log(str.join(&apos;&apos;)); //&lt;div&gt;测试A&lt;/div&gt;&lt;div&gt;测试B&lt;/div&gt;
/** 不推荐的拼接方式+=*/
var str = &apos;&apos;,
    list=[&apos;测试A&apos;,&apos;测试B&apos;];
for (var i = 0, len = list.length; i&lt; len; i++) {
    str+=&apos;&lt;div&gt;&apos; + list[i] + &apos;&lt;/div&gt;&apos;;
};
console.log(str); //&lt;div&gt;测试A&lt;/div&gt;&lt;div&gt;测试B&lt;/div&gt;
</code></pre></li>
<li><p>尽量避免使用存在兼容性及消耗资源的方法或属性。</p>
<pre><code>不要使用with，void，evil，eval_r，innerText
</code></pre></li>
<li>注重<code>HTML</code>分离, 减小<code>reflow</code>, 注重性能。</li>
</ul>
</blockquote>
<h3 id="图片规范："><a href="#图片规范：" class="headerlink" title="图片规范："></a>图片规范：</h3><hr>
<blockquote>
<ul>
<li><p>命名应用<code>小写英文</code>、<code>数字</code>、<code>_</code>组合，便于团队其他成员理解。</p>
<pre><code>header_btn.gif
header_btn2.gif
</code></pre></li>
<li>页面元素类图片均放入<code>img</code>文件夹,测试用图片放于<code>img/testimg</code>文件夹，psd源图放入<code>img/psdimg</code>文件夹。</li>
<li>图片格式仅限于<code>gif</code>、<code>png</code>、<code>jpg</code>等。</li>
<li>用<code>png</code>图片做图片时,<br>要求图片格式为<code>png-8</code>格式,若<code>png-8</code>实在影响图片质量或其中有半透明效果,请为<code>ie-6</code>单独定义背景，并尽量避免使用半透明的png图片。</li>
<li>背景图片请尽可能使用<code>sprite</code>技术, 减小<code>http</code>请求。</li>
</ul>
</blockquote>
<h3 id="注释规范："><a href="#注释规范：" class="headerlink" title="注释规范："></a>注释规范：</h3><hr>
<blockquote>
<ul>
<li><p><code>JAVASCRIPT</code>、<code>CSS</code>文件注释需要标明作者、文件版本、创建/修改时间、重大版本修改记录、函数描述、文件版本、创建或者修改时间、功能、作者等信息。</p>
<pre><code>/* * 注释块 */
</code></pre><p>中间可添加如下信息。</p>
<pre><code> @file 文件名
@addon 把一个函数标记为另一个函数的扩张，另一个函数的定义不在源文件中
@argument 用大括号中的自变量类型描述一个自变量
@author 函数/类作者的姓名
@base 如果类是继承得来，定义提供的类名称
@class 用来给一个类提供描述，不能用于构造器的文档中
@constructor 描述一个类的构造器
@deprecated 表示函数/类已被忽略
@exception 描述函数/类产生的一个错误
@exec @extends 表示派生出当前类的另一个类
@fileoverview 表示文档块将用于描述当前文件，这个标签应该放在其它任何标签之前
@final 指出函数/类
@ignore 让jsdoc忽视随后的代码
@link 类似于@link标签，用于连接许多其它页面
@member 定义随后的函数为提供的类名称的一个成员
@param 用大括号中的参数类型描述一个参数
@private 表示函数/类为私有，不应包含在生成的文档中
@requires 表示需要另一个函数/类
@return 描述一个函数的返回值
@see 连接到另一个函数/类
@throws 描述函数/类可能产生的错误
@type 指定函数/成员的返回类型
@version 函数/类的版本号
</code></pre></li>
</ul>
</blockquote>
<h3 id="开发及测试工具约定："><a href="#开发及测试工具约定：" class="headerlink" title="开发及测试工具约定："></a>开发及测试工具约定：</h3><hr>
<blockquote>
<ul>
<li>编码格式化，三码统一。</li>
<li>测试工具: 前期开发仅测试FireFox &amp; IE6 &amp; IE7 &amp; IE8 &amp; IE9 &amp; Opera &amp;<br>Chrome &amp; Safari</li>
</ul>
</blockquote>
<h3 id="参考和借鉴了大家的经验，收集整理了这一篇开发规范，感谢所有的原作者，众人拾柴火焰高，技术无国界，持续更新中。"><a href="#参考和借鉴了大家的经验，收集整理了这一篇开发规范，感谢所有的原作者，众人拾柴火焰高，技术无国界，持续更新中。" class="headerlink" title="参考和借鉴了大家的经验，收集整理了这一篇开发规范，感谢所有的原作者，众人拾柴火焰高，技术无国界，持续更新中。"></a>参考和借鉴了大家的经验，收集整理了这一篇开发规范，感谢所有的原作者，众人拾柴火焰高，技术无国界，持续更新中。</h3></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/20/git覆盖文件/" itemprop="url">
                git覆盖文件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-20T20:07:14+08:00" content="2016-01-20">
            2016-01-20
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/tool/" itemprop="url" rel="index">
                  <span itemprop="name">tool</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/20/git覆盖文件/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/20/git覆盖文件/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><blockquote>
<p>有两台服务器，一台测试服务器，一台生产服务器，一台编写代码的PC，在代码库只上传核心代码，但是由于有可能核心代码可能增多就出现问题，直接修改.gitignore之后，add+commit之后另一台服务器下载的过程中会覆盖原来的代码，强制执行会error,这个时候需要进行如下操作</p>
</blockquote>
<h2 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h2><pre><code>If you want remove all local changes from your working copy, simply stash them:

git stash save --keep-index
git pull

If you don&apos;t need them anymore, you now can drop that stash:

git stash drop
</code></pre><p>git stash可以把当前工作现场“储藏”起来，等以后恢复现场后继续工作：</p>
<p>具体链接请看廖雪峰老师的博客 <a href="http://www.liaoxuefeng.com/" target="_blank" rel="external">http://www.liaoxuefeng.com/</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/19/使用Flexible实现手机H5页面的终端适配/" itemprop="url">
                使用Flexible实现手机H5页面的终端适配
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-19T23:26:49+08:00" content="2016-01-19">
            2016-01-19
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/" itemprop="url" rel="index">
                  <span itemprop="name">html</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/19/使用Flexible实现手机H5页面的终端适配/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/19/使用Flexible实现手机H5页面的终端适配/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>参考链接 </p>
<ul>
<li><a href="http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html" target="_blank" rel="external">http://www.w3cplus.com/mobile/lib-flexible-for-html5-layout.html</a></li>
<li><a href="https://github.com/amfe/lib-flexible" target="_blank" rel="external">https://github.com/amfe/lib-flexible</a></li>
</ul>
<p>想要看为什么要使用Flexible以及代码原理可以看上面’大漠’的文章，这篇写的很清楚</p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="载入js文件"><a href="#载入js文件" class="headerlink" title="载入js文件"></a>载入js文件</h3><p>建议对于js做内联处理，在所有资源加载之前执行这个js。</p>
<p>执行这个js后，会在html（也就是document.documentElement）上增加一个data-dpr属性，以及font-size样式。</p>
<p>之后页面中的元素，都可以用rem单位来设置。html上的font-size就是rem的基准像素。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;title&gt;flexible&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;index.css&quot;&gt;
    &lt;script src=&quot;http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&quot;ex&quot;&gt;
    &lt;img src=&quot;1.png&quot; alt=&quot;&quot;&gt;
&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
// alert(lib.flexible.rem);

&lt;/script&gt;   
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id="把视觉稿中的px转换成rem"><a href="#把视觉稿中的px转换成rem" class="headerlink" title="把视觉稿中的px转换成rem"></a>把视觉稿中的px转换成rem</h3><p>首先，目前视觉稿大小分为640，750以及，1125这三种。</p>
<p>当前方案会把这3类视觉稿分成100份来看待（为了以后兼容vh，vw单位）。每一份被称为一个单位a。同时，1rem单位认定为10a。拿750的视觉稿举例：</p>
<pre><code>1a = 7.5px
1rem = 75px
</code></pre><p>因此，对于视觉稿上的元素的尺寸换算，只需要原始px值除以rem基准px值即可。例如240px <em> 120px的元素，最后转换为3.2rem </em> 1.6rem。</p>
<h3 id="字体不使用rem的方法"><a href="#字体不使用rem的方法" class="headerlink" title="字体不使用rem的方法"></a>字体不使用rem的方法</h3><p>字体的大小不推荐用rem作为单位。所以对于字体的设置，仍旧使用px作为单位，并配合用data-dpr属性来区分不同dpr下的的大小。</p>
<p>例如：</p>
<pre><code>div {
    width: 1rem; 
    height: 0.4rem;
    font-size: 12px; // 默认写上dpr为1的fontSize
}

[data-dpr=&quot;2&quot;] div {
    font-size: 24px;
}

[data-dpr=&quot;3&quot;] div {
    font-size: 36px;
}
</code></pre><h2 id="一些常用APIs"><a href="#一些常用APIs" class="headerlink" title="一些常用APIs"></a>一些常用APIs</h2><p><strong>[Number] lib.flexible.dpr</strong></p>
<p>当前页面的dpr值</p>
<p><strong>[Number] lib.flexible.rem</strong></p>
<p>当前页面的rem基准值</p>
<p><strong>[Number|String] lib.flexible.rem2px([Number|String digital])</strong></p>
<p>把rem转换为px</p>
<p><strong>[Number|String] lib.flexible.px2rem([Number|String digital])</strong></p>
<p>把px转换为rem</p>
<p><strong>lib.flexible.refreshRem()</strong></p>
<p>刷新当前页面的rem基准值</p>
<h2 id="栅格系统"><a href="#栅格系统" class="headerlink" title="栅格系统"></a>栅格系统</h2><blockquote>
<p>还有栅格系统，我暂时没用到，需要使用的可以去上面链接的github</p>
</blockquote>
<h2 id="lib-flexible原理"><a href="#lib-flexible原理" class="headerlink" title="lib-flexible原理"></a>lib-flexible原理</h2><p>原理其实很简单</p>
<blockquote>
<p>通过检查当前设备，动态的生成meta标签，并且修改html标签样式</p>
</blockquote>
<p>iphone retina的动态生成的meta标签</p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no&quot;&gt;
</code></pre><p>Android的meta标签</p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;&gt;
</code></pre><p>获取html font-size方法如下</p>
<pre><code>function refreshRem(){
    //获取页面宽度
    var width = docEl.getBoundingClientRect().width;
    if (width / dpr &gt; 540) {
        width = 540 * dpr;
    }
    var rem = width / 10;
    docEl.style.fontSize = rem + &apos;px&apos;;
    flexible.rem = win.rem = rem;
}
</code></pre><p>需要更改设计稿尺寸</p>
<pre><code>lib.flexible.rem
</code></pre><h2 id="分析-http-m-taobao-com"><a href="#分析-http-m-taobao-com" class="headerlink" title="分析 http://m.taobao.com"></a>分析 <a href="http://m.taobao.com" target="_blank" rel="external">http://m.taobao.com</a></h2><ul>
<li>无法上下滑动，点击等等</li>
<li>使用的是640px的设计稿</li>
<li>加载速度很快，感觉部分图片使用的是懒加载，再往下拉到另外一个模块的时候是异步加载</li>
<li>没有使用图片精灵，感觉因该是图片经常需要修改</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>今天突然想了想发现有其他用处，由于html的font-size是根据页面宽度制定的，所以整个页面的宽度是已知的，在手机端布局过程中宽度一般用百分比表示，而子元素的padding/margin又是根据父元素的宽度来制定的，所以为了使得上下左右的宽度一致可以使用rem+百分比的方法</p>
<p>整个后面会做一个测试页面进行实践</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/19/meta/" itemprop="url">
                meta标签
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-19T13:47:45+08:00" content="2016-01-19">
            2016-01-19
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/html/" itemprop="url" rel="index">
                  <span itemprop="name">html</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/19/meta/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/19/meta/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>参考MDN以及 <a href="http://segmentfault.com/a/1190000002407912" target="_blank" rel="external">http://segmentfault.com/a/1190000002407912</a></p>
</blockquote>
<h2 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h2><p>HTML Meta 元素 (<code>&lt;meta&gt;</code>) 用来表达任何其他 HTML 元相关元素 (<code>&lt;base&gt;, &lt;link&gt;, &lt;script&gt;, &lt;style&gt; 或者 &lt;title&gt;</code>) 等无法表达的信息。</p>
<p>通过设置不同的属性，元数据可以分为以下几种:</p>
<ul>
<li>如果设置了 <strong>name</strong> , 一个 document 级的元素数据 将附着在整个页面上(例如alert(viewport.content)可以看到该属性)。</li>
<li>如果设置了 <strong>http-equiv</strong> , 网络服务器将会给出一个 pragma directive, 即，指示页面应如何承载的指令信息。<br>如果设置了  charset，将对网页使用的字符集作出声明 HTML5<br>如果设置了  itemprop，将定义一个用户自定义的元数据，也因此语义声明，这个定义将对用户代理完全开放</li>
</ul>
<h2 id="seo优化"><a href="#seo优化" class="headerlink" title="seo优化"></a>seo优化</h2><blockquote>
<p>页面关键词，每个网页应具有描述该网页内容的一组唯一的关键字。</p>
</blockquote>
<p>使用人们可能会搜索，并准确描述网页上所提供信息的描述性和代表性关键字及短语。标记内容太短，则搜索引擎可能不会认为这些内容相关。另外标记不应超过 874 个字符。</p>
<pre><code>&lt;meta name=&quot;keywords&quot; content=&quot;your tags&quot; /&gt;
</code></pre><blockquote>
<p>页面描述，每个网页都应有一个不超过 150 个字符且能准确反映网页内容的描述标签</p>
</blockquote>
<pre><code>&lt;meta name=&quot;description&quot; content=&quot;150 words&quot; /&gt;
</code></pre><blockquote>
<p>搜索引擎索引方式，robotterms是一组使用逗号(,)分割的值，通常有如下几种取值：none，noindex，nofollow，all，index和follow。确保正确使用nofollow和noindex属性值</p>
</blockquote>
<pre><code>&lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot; /&gt;
&lt;!--
    all：文件将被检索，且页面上的链接可以被查询；
    none：文件将不被检索，且页面上的链接不可以被查询；
    index：文件将被检索；
    follow：页面上的链接可以被查询；
    noindex：文件将不被检索；
    nofollow：页面上的链接不可以被查询。
 --&gt;
</code></pre><blockquote>
<p>页面重定向和刷新：content内的数字代表时间（秒），既多少时间后刷新。如果加url,则会重定向到指定网页（搜索引擎能够自动检测，也很容易被引擎视作误导而受到惩罚）</p>
</blockquote>
<pre><code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=&quot; /&gt;
</code></pre><p>其他</p>
<pre><code>&lt;meta name=&quot;author&quot; content=&quot;author name&quot; /&gt; &lt;!-- 定义网页作者 --&gt;
&lt;meta name=&quot;google&quot; content=&quot;index,follow&quot; /&gt;
&lt;meta name=&quot;googlebot&quot; content=&quot;index,follow&quot; /&gt;
&lt;meta name=&quot;verify&quot; content=&quot;index,follow&quot; /&gt;
</code></pre><h2 id="移动设备"><a href="#移动设备" class="headerlink" title="移动设备"></a>移动设备</h2><blockquote>
<p>viewport：能优化移动浏览器的显示。如果不是响应式网站，不要使用initial-scale或者禁用缩放。大部分4.7-5寸设备的viewport宽设为360px；5.5寸设备设为400px；iphone6设为375px；ipone6 plus设为414px。</p>
</blockquote>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no&quot;/&gt;
&lt;!-- `width=device-width` 会导致 iPhone 5 添加到主屏后以 WebApp 全屏模式打开页面时出现黑边  --&gt;
</code></pre><ol>
<li>width：宽度（数值 / device-width）（范围从200 到10,000，默认为980 像素）</li>
<li>height：高度（数值 / device-height）（范围从223 到10,000）</li>
<li>initial-scale：初始的缩放比例 （范围从&gt;0 到10）</li>
<li>minimum-scale：允许用户缩放到的最小比例</li>
<li>maximum-scale：允许用户缩放到的最大比例</li>
<li>user-scalable：用户是否可以手动缩 (no,yes)</li>
<li>minimal-ui：可以在页面加载时最小化上下状态栏。（已弃用）</li>
</ol>
<p><em>注意，很多人使用initial-scale=1到非响应式网站上，这会让网站以100%宽度渲染，用户需要手动移动页面或者缩放。如果和initial-scale=1同时使用user-scalable=no或maximum-scale=1，则用户将不能放大/缩小网页来看到全部的内容。</em></p>
<blockquote>
<p>WebApp全屏模式：伪装app，离线应用。</p>
</blockquote>
<pre><code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt; &lt;!-- 启用 WebApp 全屏模式 --&gt;
</code></pre><blockquote>
<p>隐藏状态栏/设置状态栏颜色：只有在开启WebApp全屏模式时才生效。content的值为default | black | black-translucent 。</p>
</blockquote>
<pre><code>&lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black-translucent&quot; /&gt;
</code></pre><blockquote>
<p>添加到主屏后的标题</p>
</blockquote>
<pre><code>&lt;meta name=&quot;apple-mobile-web-app-title&quot; content=&quot;标题&quot;&gt;
</code></pre><p><img src="http://7xltvd.com1.z0.glb.clouddn.com/meta_title.jpeg" alt="Alt" title="添加到主屏后的标题"></p>
<blockquote>
<p>忽略数字自动识别为电话号码</p>
</blockquote>
<pre><code>&lt;meta content=&quot;telephone=no&quot; name=&quot;format-detection&quot; /&gt; 
</code></pre><blockquote>
<p>忽略识别邮箱</p>
</blockquote>
<pre><code>&lt;meta content=&quot;email=no&quot; name=&quot;format-detection&quot; /&gt;
</code></pre><blockquote>
<p>添加智能 App 广告条 Smart App Banner：告诉浏览器这个网站对应的app，并在页面上显示下载banner(如下图)。参考文档</p>
</blockquote>
<pre><code>&lt;meta name=&quot;apple-itunes-app&quot; content=&quot;app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL&quot;&gt;
</code></pre><p><img src="http://7xltvd.com1.z0.glb.clouddn.com/meta_banner.jpeg" alt="Alt" title="添加到主屏后的标题"></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><pre><code>&lt;!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 --&gt;
&lt;meta name=&quot;HandheldFriendly&quot; content=&quot;true&quot;&gt;
&lt;!-- 微软的老式浏览器 --&gt;
&lt;meta name=&quot;MobileOptimized&quot; content=&quot;320&quot;&gt;
&lt;!-- uc强制竖屏 --&gt;
&lt;meta name=&quot;screen-orientation&quot; content=&quot;portrait&quot;&gt;
&lt;!-- QQ强制竖屏 --&gt;
&lt;meta name=&quot;x5-orientation&quot; content=&quot;portrait&quot;&gt;
&lt;!-- UC强制全屏 --&gt;
&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;
&lt;!-- QQ强制全屏 --&gt;
&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;
&lt;!-- UC应用模式 --&gt;
&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;&gt;
&lt;!-- QQ应用模式 --&gt;
&lt;meta name=&quot;x5-page-mode&quot; content=&quot;app&quot;&gt;
&lt;!-- windows phone 点击无高光 --&gt;
&lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot;&gt;
</code></pre><h2 id="网页相关"><a href="#网页相关" class="headerlink" title="网页相关"></a>网页相关</h2><blockquote>
<p>申明编码</p>
</blockquote>
<pre><code>&lt;meta charset=&apos;utf-8&apos; /&gt;
</code></pre><blockquote>
<p>优先使用 IE 最新版本和 Chrome</p>
</blockquote>
<pre><code>&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;
&lt;!-- 关于X-UA-Compatible --&gt;
&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=6&quot; &gt;&lt;!-- 使用IE6 --&gt;
&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=7&quot; &gt;&lt;!-- 使用IE7 --&gt;
&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=8&quot; &gt;&lt;!-- 使用IE8 --&gt;
</code></pre><blockquote>
<p>浏览器内核控制：国内浏览器很多都是双内核（webkit和Trident），webkit内核高速浏览，IE内核兼容网页和旧版网站。而添加meta标签的网站可以控制浏览器选择何种内核渲染。参考文档</p>
</blockquote>
<pre><code>&lt;meta name=&quot;renderer&quot; content=&quot;webkit|ie-comp|ie-stand&quot;&gt;
</code></pre><p>国内双核浏览器默认内核模式如下：</p>
<ol>
<li>搜狗高速浏览器、QQ浏览器：IE内核（兼容模式）</li>
<li>360极速浏览器、遨游浏览器：Webkit内核（极速模式）</li>
</ol>
<p>禁止浏览器从本地计算机的缓存中访问页面内容：这样设定，访问者将无法脱机浏览。</p>
<pre><code>&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;&gt;
Windows 8
&lt;meta name=&quot;msapplication-TileColor&quot; content=&quot;#000&quot;/&gt; &lt;!-- Windows 8 磁贴颜色 --&gt;
&lt;meta name=&quot;msapplication-TileImage&quot; content=&quot;icon.png&quot;/&gt; &lt;!-- Windows 8 磁贴图标 --&gt;
站点适配：主要用于PC-手机页的对应关系。
&lt;meta name=&quot;mobile-agent&quot;content=&quot;format=[wml|xhtml|html5]; url=url&quot;&gt;
&lt;!--
[wml|xhtml|html5]根据手机页的协议语言，选择其中一种；
url=&quot;url&quot; 后者代表当前PC页所对应的手机页URL，两者必须是一一对应关系。
 --&gt;
</code></pre><blockquote>
<p>转码申明：用百度打开网页可能会对其进行转码（比如贴广告），避免转码可添加如下meta</p>
</blockquote>
<pre><code>&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-siteapp&quot; /&gt;
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/18/MVC-MVP-MVVM/" itemprop="url">
                MVC和MVP和MVVM
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-18T20:47:46+08:00" content="2016-01-18">
            2016-01-18
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/架构/" itemprop="url" rel="index">
                  <span itemprop="name">架构</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/18/MVC-MVP-MVVM/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/18/MVC-MVP-MVVM/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>参考阮一峰及其他博客</p>
</blockquote>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><ul>
<li>视图（View）：用户界面。</li>
<li>控制器（Controller）：业务逻辑</li>
<li>模型（Model）：数据保存</li>
</ul>
<p>各部分之间的通信方式如下</p>
<p><img src="http://7xltvd.com1.z0.glb.clouddn.com/mvc.png" alt="Alt" title="MVC模式"></p>
<ol>
<li>View 传送指令到 Controller</li>
<li>Controller 完成业务逻辑后，要求 Model 改变状态</li>
<li>Model 将新的数据发送到 View，用户得到反馈</li>
</ol>
<p><strong>原来我一直理解错了</strong></p>
<h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><blockquote>
<p>MVP 模式将 Controller 改名为 Presenter，同时改变了通信方向。</p>
</blockquote>
<p><img src="http://7xltvd.com1.z0.glb.clouddn.com/mvp.png" alt="Alt" title="MVP模式"></p>
<ol>
<li>各部分之间的通信，都是双向的。</li>
<li>View 与 Model 不发生联系，都通过 Presenter 传递。</li>
<li>View 非常薄，不部署任何业务逻辑，称为”被动视图”（Passive View），即没有任何主动性，而 Presenter非常厚，所有逻辑都部署在那里。</li>
</ol>
<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><blockquote>
<p>MVVM 模式将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。</p>
</blockquote>
<p><img src="http://7xltvd.com1.z0.glb.clouddn.com/mvvm.png" alt="Alt" title="MVVM模式"></p>
<p>唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。Angular 和 Ember 都采用这种模式。</p>
<p>现在很多前端框架都是用的MVVM架构，如上图所示实际上应该是</p>
<pre><code>view-view-model-controller-model
</code></pre><blockquote>
<p>在后端获取到的数据发送给前端框架，前端框架将数据存储起来变为其内部的model，然后转换为虚拟view蹭，最后转换为正正的view层</p>
</blockquote>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&laquo;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xltvd.com1.z0.glb.clouddn.com/default_avatar.jpg" alt="zhanfang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">zhanfang</p>
        </div>
        <p class="site-description motion-element" itemprop="description">詹方的个人博客</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">145</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">79</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhanfang" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2840048377/profile?topnav=1&wvr=6" target="_blank">Weibo</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.demozhan.com/default" target="_blank">我的作品</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhanfang</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
<div class="theme-info">© zhanfang 2015 陕ICP备15014665号-1</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhanfang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>

  <script>
    (function(){
        var bp = document.createElement('script');
        bp.src = '//push.zhanzhang.baidu.com/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
  </script>

</body>
</html>
