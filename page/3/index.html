<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta http-equiv="Cache-Control" content="max-age=86400" />
<meta name="baidu-site-verification" content="I3b2hxwJQe" />

<!-- <meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" /> -->






  <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="詹方的个人博客" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="詹方的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Fang -.-">
<meta property="og:url" content="http://www.demozhan.com/page/3/index.html">
<meta property="og:site_name" content="Fang -.-">
<meta property="og:description" content="詹方的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fang -.-">
<meta name="twitter:description" content="詹方的个人博客">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Fang -.- </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?f060a37ef3c67e7d80e0730ccf4c5f23";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Fang -.-</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            <i class="menu-item-icon icon-next-commonweal"></i> <br />
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
    <div class="site-search">
      
  
  <form class="site-search-form">
    <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
  </form>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','http://7xltvd.com1.z0.glb.clouddn.com/swifty_st.js','_st');

  _st('install', '8paz1yFszaADHgDv8F_P','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/17/深入学习Chrome-DevTools/" itemprop="url">
                深入学习Chrome DevTools
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-17T17:12:38+08:00" content="2016-01-17">
            2016-01-17
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/tool/" itemprop="url" rel="index">
                  <span itemprop="name">tool</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/17/深入学习Chrome-DevTools/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/17/深入学习Chrome-DevTools/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>本文大部分转载自<strong>civerzhu</strong>的专栏<a href="https://segmentfault.com/blog/civerzhu" target="_blank" rel="external">https://segmentfault.com/blog/civerzhu</a><br>参考链接 <a href="https://developer.chrome.com/devtools/docs" target="_blank" rel="external">https://developer.chrome.com/devtools/docs</a></p>
<h2 id="console相关技巧"><a href="#console相关技巧" class="headerlink" title="console相关技巧"></a>console相关技巧</h2><h3 id="console-log"><a href="#console-log" class="headerlink" title="console.log"></a>console.log</h3><blockquote>
<p>console.log()可以传入多个参数</p>
</blockquote>
<pre><code>console.log(&quot;test&quot;,123);
</code></pre><p>同时log的第一个参数是带有特别标示符的字符串的话控制台会有不同的效果</p>
<ul>
<li>%s 输出字符串</li>
<li>%d/%i 输出数字</li>
<li>%f 输出浮点数</li>
<li>%o 输出Dom元素</li>
<li>%O 输出JS对象</li>
<li>%c 表示对输出的文字应用特殊的样式</li>
</ul>
<hr>
<pre><code>console.log(&quot;%o&quot;,document.body.firstElementChild);
输出结果
&lt;div class=&quot;...&quot;&gt;...&lt;div&gt;
</code></pre><p>%c可以自定义输出样式</p>
<pre><code>console.log(&quot;%cThis is a colorful text&quot;,&quot;color:blue; background:red&quot;);
</code></pre><p>可以看出%c应用的样式是CSS的语法，所以基本上CSS支持的样式语句都可以支持。当然，Chrome是有过滤一些CSS语法的，比如对元素定位的CSS语法就不支持（ps：貌似定位啥的也没用，除非是想捣乱的程序员，呵呵）</p>
<p>彩色的输出语句貌似看起来中看不中用，其实不然。大型的web开发项目，特别是多人分模块开发的时候，控制台一大堆console.log输出，你一下子找不到你自己的模块的输出语句。如果给你自己的模块输入语句应用了不同的颜色，相对来说比较好定位到输出的地方，这是提高效率的一个小技巧。</p>
<h3 id="其他console-Api"><a href="#其他console-Api" class="headerlink" title="其他console Api"></a>其他console Api</h3><ul>
<li>console.warn</li>
<li>console.info</li>
<li>console.error</li>
<li>console.trace</li>
<li>console.group</li>
</ul>
<h3 id="console-time"><a href="#console-time" class="headerlink" title="console.time"></a>console.time</h3><blockquote>
<p>console.time用于显示代码执行的时间，要搭配console.timeEnd来使用。</p>
</blockquote>
<pre><code>console.time(&quot;getData use time&quot;)
for(){
    ...
}
console.timeEnd(&quot;getData use time&quot;)
输出
getData use time： 50.0000ms
</code></pre><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>其他的console方法我将简单列举一下，就不一一详细说明了，详细可以参考Google的开发文档。</p>
<ul>
<li>console.assert() 用于判断表达式，满足表达式时才输出语句；</li>
<li>console.debug() 用于输出输出debug的信息；</li>
<li>console.dir() 用于展开输出一个dom元素的JavaScript对象；</li>
<li>console.profile() 用于记录代码消耗CPU的信息；</li>
<li>console.timeStamp() 用于标记运行时的timeline信息；</li>
<li>console.count() 用于记录代码执行的次数；</li>
<li>console.memory 用于显示此刻使用的内存信息（这是一个属性而不是方法）；</li>
<li>console.table() 用表格的形式来输出信息；</li>
<li>console.clear() 清空控制台的内容（当然你可以用快捷键ctrl+L）；</li>
</ul>
<p>另外，再来优惠大派送，介绍几个在Chrome控制台上比较有趣的命令。</p>
<ul>
<li>$0 可以在控制台输出在Elements面板选中的页面元素；</li>
<li>$_ 表示上一次在控制台键入的命令，你也可以用快捷键“上方向键”来达到同样的效果；</li>
<li>$x 可以用xPath的语法来获取页面上的元素；</li>
</ul>
<h2 id="Element-面板的使用"><a href="#Element-面板的使用" class="headerlink" title="Element 面板的使用"></a>Element 面板的使用</h2><p>使用Chrome开发工具中的elements面板估计是前端工程师修改一个页面内容最快的方法了。elements面板的左侧显示页面的HMTL元素，右侧显示选中元素的样式。使用方法也很简单，用左上角的“选择鼠标”在页面上选取元素，然后就可以查看该元素的HTML属性和CSS样式了。</p>
<h3 id="查看hover方法"><a href="#查看hover方法" class="headerlink" title="查看hover方法"></a>查看hover方法</h3><p>右键Html元素菜单上的“Force element state”这个操作，就是强制设置该元素的状态。状态分为四种，分别是active/hover/focus/visited。强制设置状态在某些情况下比较的有用，例如你想查看某些hover伪类的样式，又例如元素里有隐藏的元素，需要在鼠标hover的时候才出现，但你的鼠标移开的时候hover状态就消失了，强制显示hover状态比较方便你检查元素hover的情况。</p>
<p>在elements面板的样式区域也可以给元素强制设置状态（active/hover/focus/visited）。做法和原理跟上面说的一样。</p>
<h3 id="html加断点"><a href="#html加断点" class="headerlink" title="html加断点"></a>html加断点</h3><p>在调试的过程中可以给元素添加断点。很神奇吧？现在支持的断点的状态有：元素的子节点结构改变时、元素的属性改变时、元素被删除时。在大型项目中，这一断点比较有意思。大型项目中的HTML结构都比较宏大，而且脚本在改变HTML接口的时候你又难以跟踪元素HTML的状态。使用断点，这些都不是问题。右键菜单中即可把这一功能呼唤出来。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/01/02/git强制拉取覆盖本地文件/" itemprop="url">
                git强制拉取覆盖本地文件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-01-02T17:51:39+08:00" content="2016-01-02">
            2016-01-02
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/tool/" itemprop="url" rel="index">
                  <span itemprop="name">tool</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/01/02/git强制拉取覆盖本地文件/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/01/02/git强制拉取覆盖本地文件/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>紧接上一篇，有两台服务器dev和product，需要在dev上写好的代码，覆盖到product上，但是只有部分代码改变了，所以有这个需求</p>
</blockquote>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><pre><code>git fetch --all
git reset --hard origin/master
</code></pre><p>git fetch下载远程最新的，但不尝试，或重订任何东西。 然后，git resetmaster分支重置。 </p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/12/31/利用coding进行自动化部署/" itemprop="url">
                利用coding进行自动化部署
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-12-31T19:10:51+08:00" content="2015-12-31">
            2015-12-31
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/tool/" itemprop="url" rel="index">
                  <span itemprop="name">tool</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/12/31/利用coding进行自动化部署/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/31/利用coding进行自动化部署/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>最近一直在忙实验室的事情，没有时间整理博客，有一些小的知识点直接用印象笔记记录了，之前使用svn进行服务器端开发的时候，觉得还是没有github好，远程git又不好操作，最近一个工作的朋友给我提了一下git也可以进行自动化部署，感觉很厉害，今天用 coding.net的webhook进行了自动化部署</p>
<h2 id="coding-net"><a href="#coding-net" class="headerlink" title="coding.net"></a>coding.net</h2><blockquote>
<p>coding.net速度很快，操作很方便，功能很多，个人觉得，作为私有的git库很合适</p>
</blockquote>
<p>基本操作和github类似</p>
<ol>
<li>在服务器上生成用户公钥 <code>ssh-keygen -t rsa -C &quot;anzhengchao@gmail.com&quot;</code></li>
<li>复制上面的/root/.ssh/id_rsa.pub的内容到个人设置页<a href="https://coding.net/user/setting/keys添加即可" target="_blank" rel="external">https://coding.net/user/setting/keys添加即可</a></li>
<li>生成部署公钥 <code>sudo -Hu www ssh-keygen -t rsa # 请选择 &quot;no passphrase&quot;，一直回车下去</code></li>
<li>复制用户公钥的内容并添加到Coding.net公钥:</li>
</ol>
<blockquote>
<p>选择项目 &gt; 设置 &gt; 部署公钥 &gt; 新建 &gt; 粘贴到下面框并确认</p>
</blockquote>
<ol>
<li>添加hook</li>
</ol>
<blockquote>
<p>选择项目 &gt; 设置 &gt; WebHook &gt; 新建hook &gt; 粘贴你的hook/index.php所在的网址。比如:<a href="http://example.com:3000/webhook" target="_blank" rel="external">http://example.com:3000/webhook</a>, 令牌可选，但是建议写上。</p>
</blockquote>
<ol>
<li>在服务器端创建express，代码如下</li>
</ol>
<h2 id="之后需要在现有的或者新建的项目下面做如下操作"><a href="#之后需要在现有的或者新建的项目下面做如下操作" class="headerlink" title="之后需要在现有的或者新建的项目下面做如下操作"></a>之后需要在现有的或者新建的项目下面做如下操作</h2><pre><code>git init
git commit -m &quot;first commit&quot;
git remote add origin git@coding.net:zhanfang/xxx
git push -u origin master
</code></pre><p>在提交的过程中可能原本有文件存在，会发生冲突<br>解决办法：</p>
<ol>
<li><p>强推，即利用强覆盖方式用你本地的代码替代git仓库内的内容</p>
<p> git push -f</p>
</li>
<li><p>先把git的东西fetch到你本地然后merge后再push </p>
<p> git pull</p>
</li>
</ol>
<p>又会出现另外一个问题</p>
<pre><code>[branch &quot;master&quot;] 
remote = &lt;nickname&gt; 
merge = &lt;remote-ref&gt; 
[remote &quot;&lt;nickname&gt;&quot;] 
url = &lt;url&gt; 
fetch = &lt;refspec&gt;
</code></pre><p>这等于告诉git2件事:</p>
<ol>
<li>当你处于master branch, 默认的remote就是origin。</li>
<li><p>当你在master branch上使用git pull时，没有指定remote和branch，那么git就会采用默认的remote（也就是origin）来merge在master branch上所有的改变<br>如果不想或者不会编辑config文件的话，可以在bush上输入如下命令行：</p>
<p> git config branch.master.remote origin<br> git config branch.master.merge refs/heads/master</p>
</li>
</ol>
<h2 id="大功告成"><a href="#大功告成" class="headerlink" title="大功告成"></a>大功告成</h2><blockquote>
<p>完成这些后，试着修改一次，然后push<br>之后应该服务器会自动进行pull操作</p>
</blockquote>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><pre><code>git config --global user.name &quot;overtrue&quot; 
git config --global user.email &quot;anzhengchao@gmail.com&quot; # 邮箱请与conding上一致
</code></pre><p><strong>由于网络用户是www，所以要需要部署密钥，生成方法如下：</strong></p>
<pre><code>//默认路径/alidata/www/.ssh/
sudo -u www ssh-keygen -t rsa
</code></pre><p>只有这样才能通过网络git pull</p>
<h2 id="express代码"><a href="#express代码" class="headerlink" title="express代码"></a>express代码</h2><pre><code>var express = require(&apos;express&apos;);
var process = require(&apos;child_process&apos;);
var bodyParser = require(&apos;body-parser&apos;);
var multer = require(&apos;multer&apos;);
var app = express();

app.use(bodyParser.json()); // for parsing application/json
app.use(bodyParser.urlencoded({ extended: true })); // for parsing application/x-www-form-urlencoded
app.use(multer()); // for parsing multipart/form-data


app.post(&apos;/webhook&apos;, function(req,res){
  //console.log(&apos;print&apos;, req.body);
  console.info(req.body[&quot;token&quot;]);
  if(&apos;xxx&apos; === req.body[&apos;token&apos;] ){

    console.info(process);
    process.exec(&apos;git pull&apos;, {&apos;cwd&apos;:&apos;/alidata/www/xxx&apos;},
      function (error, stdout, stderr) {
        console.log(&apos;stdout========================\n&apos; + stdout);
        console.log(&apos;stderr========================\n&apos; + stderr);
        if (error !== null) {
          res.send(&apos;&lt;pre&gt;fail!!!\n&apos; + stdout + error + &apos;&lt;/pre&gt;&apos;);
        } else {
          res.send(&apos;&lt;pre&gt;done!!!\n&apos; + stdout + &apos;&lt;/pre&gt;&apos;);
        }
      });
  } else {
    console.log(&apos; failed token &apos;)
    res.send(&apos;&lt;pre&gt;token不正确?&lt;/pre&gt;&apos;);
  }
});

app.set(&apos;port&apos;, 3000);

var server = app.listen( 3000, function() {
  console.log(&apos;Listening on port %d&apos;, server.address().port);
})
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/18/php页面静态化/" itemprop="url">
                php页面静态化
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-18T20:58:38+08:00" content="2015-11-18">
            2015-11-18
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/php/" itemprop="url" rel="index">
                  <span itemprop="name">php</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/18/php页面静态化/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/18/php页面静态化/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近要开始苦逼的网站优化之路了，因为主页是php动态页面，加载速度较慢，所以决定生成静态页面，实现方法是利用php的<code>file_put_contents</code>获取页面，然后存放到index.html中</p>
</blockquote>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">ini_set(<span class="string">"user_agent"</span>,<span class="string">"Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2) Gecko/20100301 Ubuntu/9.10 (karmic) Firefox/3.6"</span>);</div><div class="line">$index_file = ROOT_PATH . <span class="string">'index.html'</span>;</div><div class="line"></div><div class="line">$source_url = $site_url.<span class="string">"/index.php"</span>;</div><div class="line">file_put_contents($index_file, file_get_contents($source_url), LOCK_EX);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>上面的代码并不完整，但大概意思已经展现了</li>
<li><strong>由于file_get_contents总是获取到手机端页面，所以需要加上第一行的<code>ini_set</code>伪装为PC端请求</strong></li>
<li>curl更加强大，有兴趣的可以尝试一下</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/18/使用map标签实现单图多热点/" itemprop="url">
                使用map标签实现单图多热点(转)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-18T13:45:12+08:00" content="2015-11-18">
            2015-11-18
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/css/" itemprop="url" rel="index">
                  <span itemprop="name">css</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/18/使用map标签实现单图多热点/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/18/使用map标签实现单图多热点/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>转载自 <a href="http://segmentfault.com/a/1190000002489109" target="_blank" rel="external">http://segmentfault.com/a/1190000002489109</a></p>
</blockquote>
<h2 id="map标签"><a href="#map标签" class="headerlink" title="map标签"></a>map标签</h2><p>定义一个客户端图像映射。图像映射（image-map）指带有可点击区域的一幅图像。</p>
<ul>
<li>area元素永远嵌套在map元素内部。area元素可定义图像映射中的区域。</li>
<li>img标签中的usemap属性可引用的map标签中的id或name属性（取决于浏览器），所以我们应同时向map标签添加id和name属性。</li>
</ul>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>例如我们想在下面一张图实现九个热点区域，不切图，就使用map标签。<br><img src="http://7xltvd.com1.z0.glb.clouddn.com/css_map1.jpeg" alt="Alt" title="原图"><br>首先用 ps 得到几个坐标：<br><img src="http://7xltvd.com1.z0.glb.clouddn.com/css_map2.jpeg" alt="Alt" title="坐标图"></p>
<p>然后代码实现：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"cat.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">usemap</span>=<span class="string">"#catmap"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">"catmap"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"0,0,148,139"</span> <span class="attr">href</span> =<span class="string">"http://www.baidu.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"148,139,295,0"</span> <span class="attr">href</span> =<span class="string">"http://www.sina.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"295,0,439,140"</span> <span class="attr">href</span> =<span class="string">"http://www.qq.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"148,139,0,340"</span> <span class="attr">href</span> =<span class="string">"http://www.163.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"148,139,296,340"</span> <span class="attr">href</span> =<span class="string">"http://www.soso.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"296,340,439,140"</span> <span class="attr">href</span> =<span class="string">"http://sf.gg"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"0,340,148,493"</span> <span class="attr">href</span>=<span class="string">"http://www.zhihu.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"148,493,296,340"</span> <span class="attr">href</span>=<span class="string">"http://z.cn"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">"rect"</span> <span class="attr">coords</span>=<span class="string">"296,340,436,490"</span> <span class="attr">href</span>=<span class="string">"http://jd.com"</span> <span class="attr">target</span> =<span class="string">"_blank"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="关于area"><a href="#关于area" class="headerlink" title="关于area"></a>关于area</h2><ul>
<li>area 可以是圆形（circ），多边形(poly)，矩形(rect)，不同形状要选取不同的坐标（coords）.</li>
<li>圆形：shape=”circle”，coords=”x,y,z”<br>x,y为圆心坐标（x,y），z为圆的半径</li>
<li>多边形：shape=”polygon”，coords=”x1,y1,x2,y2,x3,y3,…”<br>每一对x,y坐标都定义了多边形的一个顶点(0,0) 是图像左上角的坐标）。定义三角形至少需要三组坐标；高纬多边形则需要更多数量的顶点。</li>
<li>矩形：shape=”rectangle”，coords=”x1,y1,x2,y2”<br>第一个坐标是矩形的一个角的顶点坐标，另一对坐标是对角的顶点坐标，”0,0” 是图像左上角的坐标。请注意，定义矩形实际上是定义带有四个顶点的多边形的一种简化方法。（就是说，知道对角的两个点的坐标就行了。）</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/11/flex兼容性问题/" itemprop="url">
                flex兼容性问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-11T21:43:13+08:00" content="2015-11-11">
            2015-11-11
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/css/" itemprop="url" rel="index">
                  <span itemprop="name">css</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/11/flex兼容性问题/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/11/flex兼容性问题/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近在做‘悠客生鲜’手机端，想用flex做一下，却发现原来还有兼容性问题<br>主要是ios9以下，不能直接使用flex，ios9没问题</p>
</blockquote>
<h2 id="display-flex的兼容性"><a href="#display-flex的兼容性" class="headerlink" title="display:flex的兼容性"></a>display:flex的兼容性</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">display</span>: -webkit-box;      <span class="comment">/* OLD - iOS 6-, Safari 3.1-6 */</span></div><div class="line"><span class="attribute">display</span>: -moz-box;         <span class="comment">/* OLD - Firefox 19- (buggy but mostly works) */</span></div><div class="line"><span class="attribute">display</span>: -ms-flexbox;      <span class="comment">/* TWEENER - IE 10 */</span></div><div class="line"><span class="attribute">display</span>: -webkit-flex;     <span class="comment">/* NEW - Chrome */</span></div><div class="line"><span class="attribute">display</span>: flex;             <span class="comment">/* NEW, Spec - Opera 12.1, Firefox 20+ */</span></div></pre></td></tr></table></figure>
<h2 id="flex兼容性"><a href="#flex兼容性" class="headerlink" title="flex兼容性"></a>flex兼容性</h2><pre><code>-webkit-flex: 1;
-moz-box-flex: 1;
-webkit-box-flex: 1;
-o-box-flex: 1;
-ms-flex: 1;
flex: 1;
</code></pre><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><pre><code>-webkit-flex-direction: column;
flex-direction: column;


-webkit-justify-content: space-between;
justify-content: space-between;


-webkit-align-self: flex-end;
align-self: flex-end;
</code></pre><h2 id="bug"><a href="#bug" class="headerlink" title="bug"></a>bug</h2><blockquote>
<p>慎用flex，兼容性问题太大了，学习用还可以，别用在生产环境<br>2.3-4.3的Android浏览器还是不支持flex的</p>
</blockquote>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/07/js事件流/" itemprop="url">
                JavaScript事件流
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-07T11:53:20+08:00" content="2015-11-07">
            2015-11-07
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/07/js事件流/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/07/js事件流/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><code>部分转载 http://cube.qq.com/?p=328</code><br><code>http://www.cnblogs.com/webflash/archive/2009/08/23/1552462.html</code></p>
<h2 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h2><p> 事件流是描述从页面中接受事件的顺序，ie实现的是事件冒泡流，而Netscape实现的是事件捕获流<br> 而现代的Dom事件流包括了三个阶段：事件捕获、处于目标阶段和时间冒泡阶段，如下图所示<br><img src="http://7xltvd.com1.z0.glb.clouddn.com/js事件流.png" alt="Alt text" title="js事件流">;</p>
<p><code>ie9 opera firefox chrome safari 都支持dom流，而ie8之前不支持</code></p>
<h2 id="Dom0-Dom2-Dom3"><a href="#Dom0-Dom2-Dom3" class="headerlink" title="Dom0 Dom2 Dom3"></a>Dom0 Dom2 Dom3</h2><h3 id="DOM0"><a href="#DOM0" class="headerlink" title="DOM0"></a>DOM0</h3><p>直接通过 onclick写在html里面的事件, 比如:</p>
<pre><code>&lt;input onclick=&quot;alert(1)&quot; /&gt;
</code></pre><p>使用Dom0级方法指定的事件处理程序被认为是元素的方法<br> 即程序中的this引用的是当前元素</p>
<pre><code>var btn = document.getElementById(&quot;myBtn&quot;);
btn.onclick = function(){
    alert(this.id); //&quot;myBtn&quot;
}
</code></pre><p>删除Dom0的事件处理程序</p>
<pre><code>btn.onclick = null;
</code></pre><h3 id="DOM2"><a href="#DOM2" class="headerlink" title="DOM2"></a>DOM2</h3><p>是通过addEventListener绑定的事件, 还有IE下的DOM2事件通过attachEvent绑定;</p>
<pre><code>var btn = document.getElementById(&quot;myBtn&quot;);
btn.addEventListener = (&apos;click&apos;,function(){
    alert(this.id); //&quot;myBtn&quot;
},false);
</code></pre><p><strong><em>如果该方法传入的最后一个参数值为true，表示事件处理程序被注册在捕获阶段，如果为false表示件处理程序被注册在冒泡阶段。</em></strong></p>
<h3 id="DOM3"><a href="#DOM3" class="headerlink" title="DOM3"></a>DOM3</h3><p>是一些新的事件, 区别DOM3和DOM2的方法我感觉是DOM3事件有分大小写的,DOM2没有;</p>
<h2 id="事件流的作用"><a href="#事件流的作用" class="headerlink" title="事件流的作用"></a>事件流的作用</h2><h3 id="允许多个操作被集中处理（把事件处理器添加到一个父级元素上，避免把事件处理器添加到多个子级元素上），它还可以让你在对象层的不同级别捕获事件。"><a href="#允许多个操作被集中处理（把事件处理器添加到一个父级元素上，避免把事件处理器添加到多个子级元素上），它还可以让你在对象层的不同级别捕获事件。" class="headerlink" title="允许多个操作被集中处理（把事件处理器添加到一个父级元素上，避免把事件处理器添加到多个子级元素上），它还可以让你在对象层的不同级别捕获事件。"></a>允许多个操作被集中处理（把事件处理器添加到一个父级元素上，避免把事件处理器添加到多个子级元素上），它还可以让你在对象层的不同级别捕获事件。</h3><pre><code>&lt;div onclick=&quot;eventHandle(event)&quot; id=&quot;outSide&quot; style=&quot;width:100px; height:100px; background:#000; padding:50px&quot;&gt;
    &lt;div id=&quot;inSide&quot; style=&quot;width:100px; height:100px; background:#CCC&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
//本例子只在外面盒子定义了处理方法，而这个方法一样可以捕获到子元素点击行为并处理它。假设有成千上万子元素要处理，难道我们要为每个元素加“onclick=&quot;eventHandle(event)&quot;”？显然没有这种集中处理的方法来的简单，同时它的性能也是更高的。
function eventHandle(e)
{
    var e=e||window.event;
    var obj=e.target||e.srcElement;
    alert(obj.id+&apos; was click&apos;)
}
&lt;/script&gt;
</code></pre><h3 id="让不同的对象同时捕获同一事件，并调用自己的专属处理程序做自己的事情"><a href="#让不同的对象同时捕获同一事件，并调用自己的专属处理程序做自己的事情" class="headerlink" title="让不同的对象同时捕获同一事件，并调用自己的专属处理程序做自己的事情"></a>让不同的对象同时捕获同一事件，并调用自己的专属处理程序做自己的事情</h3><pre><code>&lt;div onclick=&quot;outSideWork()&quot; id=&quot;outSide&quot; style=&quot;width:100px; height:100px; background:#000; padding:50px&quot;&gt;
    &lt;div onclick=&quot;inSideWork()&quot; id=&quot;inSide&quot; style=&quot;width:100px; height:100px; background:#CCC&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
function outSideWork()
{
    alert(&apos;My name is outSide,I was working...&apos;);
}

function inSideWork()
{
    alert(&apos;My name is inSide,I was working...&apos;);
}

//因为下面程序自动激活单击事件，有些浏览器不允许，所以请单击灰色盒子，从这里开始下命令，这样因为冒泡的原因，黑色大盒子也会收到单击事件，并调用了自己的处理程序。如果还有更多盒子嵌套，一样道理。
&lt;/script&gt;
</code></pre><h2 id="事件处理顺序"><a href="#事件处理顺序" class="headerlink" title="事件处理顺序"></a>事件处理顺序</h2><p>在W3C事件模型中，任何事件会首先被捕获直至到达目标元素然后再冒泡回去。事件流包括3个阶段：事件捕获阶段、处于目标阶段和事件冒泡阶段。Web开发者可以选择将事件处理程序注册在捕获或者冒泡阶段。这可以通过addEventListener()方法来实现。(element2是element1的子元素)</p>
<pre><code>element1.addEventListener(“click”, doSomething2, true);
element2.addEventListener(“click”, doSomething, false);
</code></pre><p>如果用户点击元素2会发生如下事情：</p>
<ul>
<li>点击事件开始于捕获阶段。它会先查询是否有元素2的任何祖先元素在捕获阶段绑定了onclick事件。</li>
<li>它发现祖先元素1在捕获阶段绑定了onclick事件，于是element1.doSomething2()首先被执行。</li>
<li>事件一直查询到目标元素element2都没有再发现别的在捕获阶段绑定的onclick事件，事件转到它的冒泡阶段并执行doSomething()(注册在element2上的在冒泡阶段执行的事件处理程序)。</li>
<li>事件再次向上查询并检查是否有任何祖先元素在冒泡阶段绑定了onclick事件，并没有查询到，所以什么都没有发生。</li>
</ul>
<p>再看相反的例子：</p>
<pre><code>element1.addEventListener(“click”, doSomething2, false);
element2.addEventListener(“click”, doSomething, false);
</code></pre><p>现在如果用户点击元素2，下面的事情会按顺序发生：</p>
<ul>
<li>点击事件发生于捕获阶段。事件查询元素2是否有任何祖先元素在捕获阶段绑定了onclick事件并且没有查找到这样的元素。</li>
<li>事件查询到目标元素element2自己。事件转为冒泡阶段并执行doSomething()。</li>
<li>事件再次向上查询并检查目标元素是否有任何祖先元素在冒泡阶段绑定了onclick事件。</li>
<li>它找到了满足条件的元素1，然后执行doSomething2()。    </li>
</ul>
<h3 id="始终都会发生"><a href="#始终都会发生" class="headerlink" title="始终都会发生"></a>始终都会发生</h3><p>首先需要理解的是事件捕获或者冒泡始终都会发生。如果你为整个document定义一个onclick事件处理程序：</p>
<pre><code>document.onclick = function(){
  alert(&quot;clicked&quot;);
};
</code></pre><p>在文档中任何元素上的任何点击事件最终都会冒泡到document，并且触发上面注册的事件处理程序，从而弹出一个警告框。只有当之前的事件处理程序阻止冒泡时，才不会冒泡到document上。</p>
<p>如果你的文档结构非常复杂，你可以通过阻止冒泡来节约系统资源。毕竟，浏览器必须查询事件目标的每一个祖先元素是否有绑定相同的事件，即使一个也没有找到，这个查询的过程仍然需要花费时间。</p>
<p> 要想阻止冒泡，在Microsoft模型中，你需要将事件的cancelBubble属性设置为true。在W3C模型中，你需要调用事件的stopPropagation()方法。</p>
<h3 id="阻止冒泡"><a href="#阻止冒泡" class="headerlink" title="阻止冒泡"></a>阻止冒泡</h3><p>如果想解决浏览器兼容问题，你可以像下面这样写：</p>
<pre><code>function doSomething(e){
  if(!e){
    var e = window.event;
  }
  e.cancelBubble = true;
  if(e.stopPropagation){
    e.stopPropagation();
  }
}
</code></pre><p>在不支持cancelBubble属性的浏览器中设置它的值并不会报错。浏览器会忽略它并创建这个属性。当然，它并不能真正地阻止冒泡，但是给它分配值的操作本身是安全的</p>
<h2 id="currentTarget"><a href="#currentTarget" class="headerlink" title="currentTarget"></a>currentTarget</h2><p>就像我们之前看到的，一个事件拥有一个target或者srcElement属性，它包含一个对事件所发生的元素的引用。在我们的例子中是element2，因为用户点击的是它。</p>
<p>理解在捕获和冒泡过程中这个target是不会改变的是非常重要的：它始终是对element2的引用。</p>
<p>但是假设我们像下面这样注册这些事件处理程序：</p>
<pre><code>element1.onclick = doSomething;
element2.onclick = doSomething;
</code></pre><p>如果用户点击element2，doSomething()会执行两次。但是你怎样知道哪一个HTML元素正在处理这个事件？target/srcElement并不能给出正确答案，因为它们始终是对element2的引用。</p>
<p>为了解决这个问题，W3C添加了currentTarget属性。它包含对正在处理事件的HTML元素的引用。不幸的是Microsoft模型并不支持类似的属性。</p>
<p>你也可以使用this关键字。在上面的例子中它引用正在处理事件的HTML元素，就像currentTarget属性。</p>
<h2 id="注意要点"><a href="#注意要点" class="headerlink" title="注意要点"></a>注意要点</h2><ul>
<li><p>不是所有的事件都能冒泡。以下事件不冒泡：blur、focus、load、unload。</p>
</li>
<li><p>事件捕获方式在不同浏览器，甚至同种浏览器的不同版本中是有所区别的。如Netscape4.0采用捕获型事件解决方案，其它多数浏览器则支持冒泡型事件解决方案，另外DOM事件流还支持文本节点事件冒泡。</p>
</li>
<li><p>事件捕获到达顶层的目标在不同浏览器或不同浏览器版本也是有区别的。在IE6中HTML是接收事件冒泡的，另外大部分浏览器将冒泡延续到window对象，即……body→documen→window。</p>
</li>
<li><p>阻止冒泡并不能阻止对象默认行为。比如submit按钮被点击后会提交表单数据，这种行为无须我们写程序定制。</p>
</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><blockquote>
<p>实践是检验真理的唯一标准，对于jquery，必须写在内部<br>实际用的过程，可能一个父元素有一个事件，子元素有另一个事件，为了保证点击子元素的时候，父元素不被触发，必须阻止冒泡</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>ul (祖父)  </div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">onclick</span>=<span class="string">click2()</span>&gt;</span>li (直接父)</div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">onclick</span>=<span class="string">click1()</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>) </span>&#123;</div><div class="line">    $(<span class="string">"span"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        alert</div><div class="line">        event.stopPropagation();</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">click2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	alert(<span class="string">"li"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/04/webpack/" itemprop="url">
                webpack
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-04T14:45:52+08:00" content="2015-11-04">
            2015-11-04
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/04/webpack/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/04/webpack/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h2><ul>
<li>输出文件夹名必须为build（原因不明）</li>
<li>index.html 放到build文件夹下(否则不能自动刷新)</li>
<li>package.json script修改为</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>: [</div><div class="line">        path.resolve(__dirname, <span class="string">'src/entry.js'</span>)</div><div class="line">    ],</div><div class="line">    <span class="attr">output</span>: &#123;</div><div class="line">        <span class="attr">path</span>: path.join(__dirname, <span class="string">'build'</span>),</div><div class="line">        <span class="attr">filename</span>: <span class="string">"bundle.js"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">externals</span>: &#123;</div><div class="line">        <span class="string">'react'</span>: <span class="string">'React'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">module</span>: &#123;</div><div class="line">        <span class="attr">loaders</span>: [</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">"jsx!babel"</span>, <span class="attr">include</span>: <span class="regexp">/src/</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">"style!css"</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">"style!css!sass"</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.svg$/</span>, <span class="attr">loader</span>: <span class="string">"url?limit=8192"</span>&#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"myTodo"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"build"</span>: <span class="string">"webpack"</span>,</div><div class="line">    <span class="attr">"dev"</span>: <span class="string">"webpack-dev-server --devtool eval --progress --colors --hot --content-base build"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="attr">"dependencies"</span>: &#123;</div><div class="line">    <span class="attr">"react"</span>: <span class="string">"^0.13.3"</span>,</div><div class="line">    <span class="attr">"sass"</span>: <span class="string">"^0.5.0"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">    <span class="attr">"babel-core"</span>: <span class="string">"^5.5.8"</span>,</div><div class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^5.1.4"</span>,</div><div class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^0.14.5"</span>,</div><div class="line">    <span class="attr">"file-loader"</span>: <span class="string">"^0.8.4"</span>,</div><div class="line">    <span class="attr">"jsx-loader"</span>: <span class="string">"^0.13.2"</span>,</div><div class="line">    <span class="attr">"node-libs-browser"</span>: <span class="string">"^0.5.2"</span>,</div><div class="line">    <span class="attr">"node-sass"</span>: <span class="string">"^3.2.0"</span>,</div><div class="line">    <span class="attr">"sass-loader"</span>: <span class="string">"^1.0.2"</span>,</div><div class="line">    <span class="attr">"style-loader"</span>: <span class="string">"^0.12.3"</span>,</div><div class="line">    <span class="attr">"url-loader"</span>: <span class="string">"^0.5.6"</span>,</div><div class="line">    <span class="attr">"webpack"</span>: <span class="string">"^1.9.11"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h2><ul>
<li>输出文件夹名必须为build（原因不明）</li>
<li>index.html 放到build文件夹下(否则不能自动刷新)</li>
<li>package.json script修改为重点</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/04/react笔记/" itemprop="url">
                react笔记
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-04T14:32:28+08:00" content="2015-11-04">
            2015-11-04
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/11/04/react笔记/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/04/react笔记/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>看100遍不如自己写一遍，最近参考网上一个Todo例子写了一个Todo应用，顺便适配了移动端，发现了一系列问题 我自己的例子demo <a href="http://115.28.147.237:2223/demo1/" target="_blank" rel="external">http://115.28.147.237:2223/demo1/</a></p>
<p>参考 <a href="http://h5shop.org/article/50/" target="_blank" rel="external">http://h5shop.org/article/50/</a></p>
</blockquote>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p>每一个组件都有可变与不可变的属性，props就是不可变的属性，当props改变时，组件的绘制方法不会被调用。</p>
<h2 id="states"><a href="#states" class="headerlink" title="states"></a>states</h2><blockquote>
<p>当setState时会重新渲染render</p>
</blockquote>
<p>states就是组件的可变属性，states的改变会触发组件的render函数，react与其他mvvm框架的最大的不同点就是，react组件可以想象成一个状态机，状态的改变会重绘UI，然后根据 dom diff 算法来绘制UI，而其他的mvvm框架则是对js对象的dirty </p>
<p><strong>我们在设计React组件时如何灵活的运用props与state是一个非常关键的要点。</strong></p>
<h2 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h2><p>refs这个点主要用在上级组件调用下级组件的场景，这个场景非常多见。</p>
<pre><code>React.findDOMNode(this.refs.deleteBtn).style.visibility = &quot;visible&quot;;
</code></pre><h2 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h2><p>组件UI渲染完毕后调用，常用在这种业务场景：调用ajax获得数据后，渲染UI。</p>
<h2 id="各种坑"><a href="#各种坑" class="headerlink" title="各种坑"></a>各种坑</h2><h3 id="触摸事件"><a href="#触摸事件" class="headerlink" title="触摸事件"></a>触摸事件</h3><p>React中的触摸事件仅用三种，touchstart, touchend, touchmove，可是这种会有问题，有时候我需要滚动页面的时候，很容易触发某一个元素的touchend事件，为此笔者找了一个React第三方组件，<a href="https://github.com/JedWatson/react-tappable" target="_blank" rel="external">React-tappable</a>。</p>
<h3 id="还无意中发现一个Android与iOS的不同之处"><a href="#还无意中发现一个Android与iOS的不同之处" class="headerlink" title="还无意中发现一个Android与iOS的不同之处"></a>还无意中发现一个Android与iOS的不同之处</h3><p>input在disable且readonly之后，onClick会在iOS上触发不起来，onTouchEnd又会在Android上把键盘弹出来，这边笔者做了个Hack，iOS下用onTouchEnd，Android下用onClick，就正常了。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/30/flex学习笔记/" itemprop="url">
                flex学习笔记
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-30T22:22:04+08:00" content="2015-10-30">
            2015-10-30
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/css/" itemprop="url" rel="index">
                  <span itemprop="name">css</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/30/flex学习笔记/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/30/flex学习笔记/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>最近想学习一下移动端开发，学习了一下flex，这个东西简直厉害的不行呀，主要是参考阮一峰的文章</p>
</blockquote>
<h2 id="容器的属性"><a href="#容器的属性" class="headerlink" title="容器的属性"></a>容器的属性</h2><ul>
<li><strong>flex-directio</strong>n：flex的方向(row | row-reverse | column | column-reverse) ,这个对于很多布局是很有用的</li>
<li>flex-wrap：换行（nowrap | wrap | wrap-reverse），默认不换行</li>
<li>flex-flow：是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap</li>
<li><strong>justify-content</strong>：属性定义了项目在主轴上的对齐方式（flex-start | flex-end | center | space-between | space-around）</li>
<li><strong>align-items</strong>：定义项目在交叉轴上如何对齐，即纵轴上的对齐方式</li>
<li>align-content：定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用</li>
</ul>
<h2 id="项目的属性"><a href="#项目的属性" class="headerlink" title="项目的属性"></a>项目的属性</h2><ul>
<li><strong>order</strong>：定义项目的排列顺序。数值越小，排列越靠前，默认为0（可以为负数）</li>
<li>flex-grow：属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大</li>
<li>flex-shrink：属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小</li>
<li><strong>flex-basis</strong>：定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小</li>
<li><strong>flex</strong>： <code>none | [ &lt;&#39;flex-grow&#39;&gt; &lt;&#39;flex-shrink&#39;&gt;? || &lt;&#39;flex-basis&#39;&gt; ]</code>，</li>
<li>align-self：允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性</li>
</ul>
<h2 id="flex实例"><a href="#flex实例" class="headerlink" title="flex实例"></a>flex实例</h2><ul>
<li>骰子的布局</li>
<li>网格布局</li>
<li>圣杯布局</li>
<li>输入框的布局</li>
<li>悬挂式布局</li>
</ul>
<p>上面几个布局我已经自己动手写过，之后传到github吧</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/28/hexo优化/" itemprop="url">
                hexo优化与pm2
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-28T23:44:47+08:00" content="2015-10-28">
            2015-10-28
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/28/hexo优化/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/28/hexo优化/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>真是受够了hexo一直出问题，今天都想自己写一个md个人博客，忍了忍又把hexo优化了一下<br>还有之前帮老师做的公众账号，一直用forever出问题，今天试着用pm2重新弄了一下，效果不错</p>
</blockquote>
<h2 id="hexo优化"><a href="#hexo优化" class="headerlink" title="hexo优化"></a>hexo优化</h2><ol>
<li>删除了之前的 InstantClick</li>
<li>通过查看加载时间，发现一个<code>&lt;link font.google... /&gt;</code>什么的加载时间非常慢，快有1分钟了，简直不能忍，查看了一下，源代码，大概意思是如果字体<code>zh-hans</code>加载不成功的时候会加载这个字体，果断删掉这段代码</li>
</ol>
<h2 id="pm2"><a href="#pm2" class="headerlink" title="pm2"></a>pm2</h2><p>主要特性：</p>
<p>内建负载均衡（使用Node cluster 集群模块）<br>后台运行<br>0秒停机重载，我理解大概意思是维护升级的时候不需要停机.<br>具有Ubuntu和CentOS 的启动脚本<br>停止不稳定的进程（避免无限循环）<br>控制台检测<br>提供 HTTP API<br>远程控制和实时的接口API ( Nodejs 模块,允许和PM2进程管理器交互 )</p>
<p>测试过Nodejs v0.11 v0.10 v0.8版本，兼容CoffeeScript,基于Linux 和MacOS.</p>
<p>安装</p>
<pre><code>npm install -g pm2
</code></pre><p>用法</p>
<pre><code>$ npm install pm2 -g     # 命令行安装 pm2 
$ pm2 start app.js -i 4 #后台运行pm2，启动4个app.js 
                                # 也可以把&apos;max&apos; 参数传递给 start
                                # 正确的进程数目依赖于Cpu的核心数目
$ pm2 start app.js --name my-api # 命名进程
$ pm2 list               # 显示所有进程状态
$ pm2 monit              # 监视所有进程
$ pm2 logs               #  显示所有进程日志
$ pm2 stop all           # 停止所有进程
$ pm2 restart all        # 重启所有进程
$ pm2 reload all         # 0秒停机重载进程 (用于 NETWORKED 进程)
$ pm2 stop 0             # 停止指定的进程
$ pm2 restart 0          # 重启指定的进程
$ pm2 startup            # 产生 init 脚本 保持进程活着
$ pm2 web                # 运行健壮的 computer API endpoint (http://localhost:9615)
$ pm2 delete 0           # 杀死指定的进程
$ pm2 delete all         # 杀死全部进程
</code></pre><p>运行进程的不同方式：</p>
<pre><code>$ pm2 start app.js -i max  # 根据有效CPU数目启动最大进程数目
$ pm2 start app.js -i 3      # 启动3个进程
$ pm2 start app.js -x        #用fork模式启动 app.js 而不是使用 cluster
$ pm2 start app.js -x -- -a 23   # 用fork模式启动 app.js 并且传递参数 (-a 23)
$ pm2 start app.js --name serverone  # 启动一个进程并把它命名为 serverone
$ pm2 stop serverone       # 停止 serverone 进程
$ pm2 start app.json        # 启动进程, 在 app.json里设置选项
$ pm2 start app.js -i max -- -a 23                   #在--之后给 app.js 传递参数
$ pm2 start app.js -i max -e err.log -o out.log  # 启动 并 生成一个配置文件
</code></pre><p>你也可以执行用其他语言编写的app  ( fork 模式):</p>
<pre><code>$ pm2 start my-bash-script.sh    -x --interpreter bash
$ pm2 start my-python-script.py -x --interpreter python
</code></pre><p>0秒停机重载:<br>这项功能允许你重新载入代码而不用失去请求连接。<br>注意：<br>仅能用于web应用<br>运行于Node 0.11.x版本<br>运行于 cluster 模式（默认模式）</p>
<pre><code>$ pm2 reload all
</code></pre><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>最后我对比了一下我写的两个公众号，发现nodejs写的回复速度比php写的快，之后具体比一比</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/28/js正则匹配/" itemprop="url">
                js正则匹配-特殊字符
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-28T18:58:53+08:00" content="2015-10-28">
            2015-10-28
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/28/js正则匹配/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/28/js正则匹配/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>列出一些常用的特殊字符</p>
</blockquote>
<h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><ul>
<li>\: 做为转意，即通常在”\”后面的字符不按原来意义解释，如/b/匹配字符”b”，当b前面加了反斜杆后/\b/，转意为匹配一个单词的边界。 -或-<br>对正则表达式功能字符的还原，如”<em>“匹配它前面元字符0次或多次，/a</em>/将匹配a,aa,aaa，加了”\”后，<code>/a\*/</code>将只匹配”a*”。</li>
<li>^   匹配一个输入或一行的开头，/^a/匹配”an A”，而不匹配”An a”</li>
<li>$   匹配一个输入或一行的结尾，/a$/匹配”An a”，而不匹配”an A”</li>
<li><ul>
<li><strong>贪婪量词</strong> 匹配前面元字符 <strong>0次或多次</strong> ，/ba*/将匹配b,ba,baa,baaa</li>
</ul>
</li>
<li><ul>
<li>匹配前面元字符1次或多次，/b(a+)/将匹配ba,baa,baaa</li>
</ul>
</li>
<li>?   匹配前面元字符0次或1次，/ba*/将匹配b,ba</li>
<li>(x) 匹配x保存x在名为$1…$9的变量中</li>
<li>x|y 匹配x或y</li>
<li>{n} 精确匹配n次</li>
<li>{n,}    匹配n次以上</li>
<li>{n,m}   匹配n-m次</li>
<li>[xyz]   字符集(character set)，匹配这个集合中的任一一个字符(或元字符)</li>
<li>[^xyz]  不匹配这个集合中的任何一个字符</li>
<li>[\b]    匹配一个退格符</li>
<li>\b  匹配一个单词的边界</li>
<li>\B  匹配一个单词的非边界</li>
<li>\cX 这儿，X是一个控制符，/\cM/匹配Ctrl-M</li>
<li>\d  匹配一个字数字符，/\d/ = /[0-9]/</li>
<li>\D  匹配一个非字数字符，/\D/ = /[^0-9]/</li>
<li>\n  匹配一个换行符</li>
<li>\r  匹配一个回车符</li>
<li>\s  匹配一个空白字符，包括\n,\r,\f,\t,\v等</li>
<li>\S  匹配一个非空白字符，等于/[^\n\f\r\t\v]/</li>
<li>\t  匹配一个制表符</li>
<li>\v  匹配一个重直制表符</li>
<li>\w  匹配一个可以组成单词的字符(alphanumeric，这是我的意译，含数字)，包括下划线，如[\w]匹配”$5.98”中的5，等于[a-zA-Z0-9]</li>
<li>\W  匹配一个不可以组成单词的字符，如[\W]匹配”$5.98”中的$，等于[^a-zA-Z0-9]。</li>
</ul>
<h2 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h2><h3 id="去除字符串前后空格的五种方法"><a href="#去除字符串前后空格的五种方法" class="headerlink" title="去除字符串前后空格的五种方法"></a>去除字符串前后空格的五种方法</h3><h4 id="trim1"><a href="#trim1" class="headerlink" title="trim1"></a>trim1</h4><blockquote>
<p>使用两个子表达式。一个去除头部空白，一个去除尾部，<strong>好的跨浏览器解决方案</strong></p>
</blockquote>
<pre><code>if(!String.prototype.trim){
    String.prototype.trim = function(){
        return this.replace(/^\s+/,&quot;&quot;).replace(/\s+$/,&quot;&quot;);
    }
}
</code></pre><p>####trim2</p>
<blockquote>
<p>该方法处理长字符串，比第一种方法慢，因为有两个分支选项</p>
</blockquote>
<pre><code>String.prototype.trim=function() {
    return this.replace(/^\s+|\s+$/g,&apos;&apos;);
}
</code></pre><h4 id="trim3"><a href="#trim3" class="headerlink" title="trim3"></a>trim3</h4><blockquote>
<p>效率低，不建议使用</p>
</blockquote>
<pre><code>String.prototype.trim = function(){
    return this.replace(/^\s*([\s\S]*?)\s*$/,&quot;$1&quot;);
}
</code></pre><h4 id="trim4"><a href="#trim4" class="headerlink" title="trim4"></a>trim4</h4><blockquote>
<p>贪婪量词</p>
</blockquote>
<pre><code>String.prototype.trim = function(){
    return this.replace(/^\s*([\s\S]*\S)?\s*$/,&quot;$1&quot;);
}
</code></pre><h4 id="trim5"><a href="#trim5" class="headerlink" title="trim5"></a>trim5</h4><blockquote>
<p>最慢</p>
</blockquote>
<pre><code>String.prototype.trim = function(){
    return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,&quot;$1&quot;);
}  
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/25/php敏感词过滤/" itemprop="url">
                php敏感词过滤
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-25T16:04:45+08:00" content="2015-10-25">
            2015-10-25
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/25/php敏感词过滤/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/25/php敏感词过滤/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>苦逼的周末还要把之前 三五成群 的东西完善了，大家可以去关注这个公众号<br>因为微信公众平台还是需要过滤一些文字的，需要用到php敏感词过滤<br>其实代码很简单的，直接贴出来就好，以后可以直接用</p>
</blockquote>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><pre><code>function filter($str){
    if (is_file(&quot;filterwords.txt&quot;)){   //判断给定文件名是否为一个正常的文件
        $filter_word = file(&quot;filterwords.txt&quot;);  //把整个文件读入一个数组中
        for($i=0;$i&lt;count($filter_word);$i++){   //应用For循环语句对敏感词进行判断
            if(preg_match(&quot;/&quot;.trim($filter_word[$i]).&quot;/i&quot;,$str)){  //应用正则表达式，判断传递的留言信息中是否含有敏感词
                $words = trim($filter_word[$i]);
                return str_replace($words,&quot;**&quot;,$str);
            }
        }
    }
    return $str;
}
</code></pre><p><strong>注意转成utf-8</strong></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/23/高性能javascript-1/" itemprop="url">
                高性能javascript-1 (加载和执行)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-23T11:42:10+08:00" content="2015-10-23">
            2015-10-23
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/js/" itemprop="url" rel="index">
                  <span itemprop="name">js</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/23/高性能javascript-1/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/23/高性能javascript-1/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>之前转载过一篇阮一峰写的js优化方面的博客，讲的特别好，大家可以去看看，最近在看《高性能javascript》，简单的做了一些笔记</p>
</blockquote>
<p>准备总结一点东西，但是回头看书的时候又觉得这本书总结的已经很好了，推荐大家买一本《高性能javascript》，自己拿来看看吧</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/16/react-touch事件/" itemprop="url">
                react touch事件
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-16T13:13:01+08:00" content="2015-10-16">
            2015-10-16
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/react/" itemprop="url" rel="index">
                  <span itemprop="name">react</span>
                </a>
              </span>

              
              
                , 
              

            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/react/mobile/" itemprop="url" rel="index">
                  <span itemprop="name">mobile</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/10/16/react-touch事件/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/16/react-touch事件/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p>前一篇文章提到<strong>前端框架React.js在IOS手机上onClick属性失效</strong><br>其实理论上触屏设备都应该出问题，可能是由于android还是支持click，但click并不好，有300ms的延时，最好还是用touch方法</p>
</blockquote>
<h2 id="知乎上有两种办法"><a href="#知乎上有两种办法" class="headerlink" title="知乎上有两种办法"></a>知乎上有两种办法</h2><ul>
<li><p>在组件中的componentDidMount方法中，为该div绑定事件，在回调函数中写入想要实现的逻辑。选取dom的方法，可以用原生js或jquery，也可以用react中的ref实现。</p>
</li>
<li><p>为“按钮”这个div 的样式 加入cursor:pointer这一条属性，在ios设备上就正常了。<strong>(这个我试过，可行)</strong></p>
</li>
</ul>
<blockquote>
<p>这两种方法都不完美，前者写的不够优雅，好的react项目中是基本不对dom进行操作的；后者虽然只加了一行代码，但对日后维护增加了不确定性，特别是对于移动端的页面，cursor属性在不明真相的人看起来会觉得你写的莫名其妙，很可能误删，造成不必要的麻烦。</p>
</blockquote>
<h2 id="最好的办法–touch"><a href="#最好的办法–touch" class="headerlink" title="最好的办法–touch"></a>最好的办法–touch</h2><p><a href="http://reactjs.cn/react/docs/events.html" target="_blank" rel="external">React event列表</a></p>
<h3 id="触摸事件"><a href="#触摸事件" class="headerlink" title="触摸事件"></a>触摸事件</h3><p>为了使触摸事件生效，在渲染所有组件之前调用 </p>
<pre><code>React.initializeTouchEvents(true)。
</code></pre><p>事件名：</p>
<pre><code>onTouchCancel onTouchEnd onTouchMove onTouchStart
</code></pre><p>属性：</p>
<pre><code>boolean altKey
DOMTouchList changedTouches
boolean ctrlKey
function getModifierState(key)
boolean metaKey
boolean shiftKey
DOMTouchList targetTouches
DOMTouchList touches
</code></pre><h3 id="一个参考代码"><a href="#一个参考代码" class="headerlink" title="一个参考代码"></a>一个参考代码</h3><pre><code>var IndexPage = (function(A){
    var Person = React.createClass({
        handleClick: function () {
            window.location.href = &quot;#&quot; + this.props.id ;
        },
        render: function () {
            var link = &quot;tel:&quot; + this.props.tel;
            return (
                &lt;A.ListItem className=&quot;Person&quot; onClick={this.handleClick} onTouchStart={this.handleClick}&gt;
                    &lt;A.Icon icon=&quot;user&quot; className=&quot;person-icon&quot; /&gt;
                    {this.props.name}
                    &lt;A.Badge amStyle=&quot;success&quot; radius className=&quot;person-phone&quot;&gt;
                        &lt;a href={link}&gt;
                            &lt;A.Icon icon=&quot;phone&quot; /&gt;
                        &lt;/a&gt;
                    &lt;/A.Badge&gt;
                &lt;/A.ListItem&gt;
            );
        }
    });

    return React.createClass({
        initializeTouchEvents: function () {
            return (true);
        },
        getInitialState: function () {
            return {
                persons: []
            };
        },
        componentDidMount: function () {
            $.getJSON(&apos;/js/data.json&apos;).then(function (data) {
                if(this.isMounted()){
                    this.setState({
                        persons:data
                    });
                }
            }.bind(this));
        },
        render: function () {
            var items = this.state.persons.map(function (t) {
                return &lt;Person {...t} /&gt;;
            });
            return (
                &lt;div&gt;
                    &lt;A.Header title=&quot;通讯录3&quot;/&gt;
                    &lt;A.List className=&quot;person-list&quot;&gt;
                        {items}
                    &lt;/A.List&gt;
                &lt;/div&gt;
            );
        }
    });
})(AMUIReact);
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://7xltvd.com1.z0.glb.clouddn.com/default_avatar.jpg" alt="zhanfang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">zhanfang</p>
        </div>
        <p class="site-description motion-element" itemprop="description">詹方的个人博客</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">145</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">79</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhanfang" target="_blank">GitHub</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2840048377/profile?topnav=1&wvr=6" target="_blank">Weibo</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.demozhan.com/default" target="_blank">我的作品</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhanfang</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
<div class="theme-info">© zhanfang 2015 陕ICP备15014665号-1</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhanfang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>

  <script>
    (function(){
        var bp = document.createElement('script');
        bp.src = '//push.zhanzhang.baidu.com/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
  </script>

</body>
</html>
